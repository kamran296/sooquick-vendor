import{d as g,c as y,u as N,a as c,m as h,j as e,b as v,y as p}from"./index-CZcwaId7.js";import{U as w}from"./UserLayout-BhLhJfUp.js";import{N as C,d as D,n as M,k as l,O as A,E as P}from"./index-CRrw9I0A.js";import"./iconBase-DWq9drA2.js";import"./index-CP5vjhFU.js";const Y=()=>{const{membership:s}=g(a=>a.user),m=y(),u=N(),[r,d]=c.useState(!1),[j,i]=c.useState(!1);c.useEffect(()=>{s||m(h()).unwrap()},[]);const n=a=>{const x={year:"numeric",month:"long",day:"numeric"};return new Date(a).toLocaleDateString(void 0,x)},t=a=>a?.charAt(0).toUpperCase()+a.slice(1),f=async()=>{try{d(!0);const a=await v.cancelMembership();console.log(a),a.data.success&&(i(!1),p.success("Membership cancelled successfully"),await m(h()).unwrap())}catch(a){p.error(a.response?.data?.message||"Failed to cancel membership"),console.log("error cancelling membership",a)}finally{d(!1)}},o=()=>{if(!s||!s.purchaseDate)return!1;const a=new Date(s.purchaseDate),b=new Date-a;return Math.floor(b/(1e3*60*60*24))<=7};return e.jsxs(w,{children:[e.jsxs("div",{className:"mx-auto max-w-4xl p-6",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"Your Membership"}),e.jsx("p",{className:"mb-8 text-gray-600",children:"Manage your subscription and view membership details"}),s&&s.type!=="none"?e.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow-md",children:[e.jsx("div",{className:`p-6 text-white ${s.type==="premium"?"bg-gradient-to-r from-teal-600 to-teal-800":s.type==="gold"?"bg-gradient-to-r from-amber-600 to-amber-800":"bg-gradient-to-r from-blue-600 to-blue-800"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"mr-3 text-2xl"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[t(s.type)," Membership"]}),e.jsxs("p",{className:"opacity-90",children:["Active since ",n(s.purchaseDate)]})]})]}),e.jsx("span",{className:`rounded-full px-3 py-1 text-sm font-semibold ${s.status==="active"?"bg-teal-500":"bg-gray-500"}`,children:t(s.status)})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[e.jsxs("h3",{className:"mb-3 flex items-center text-lg font-semibold text-gray-900",children:[e.jsx(D,{className:"mr-2 text-teal-600"}),"Plan Details"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Membership Type"}),e.jsx("span",{className:"font-medium",children:t(s.type)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Purchase Date"}),e.jsx("span",{className:"font-medium",children:n(s.purchaseDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expiry Date"}),e.jsx("span",{className:"font-medium",children:n(s.expiryDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsx("span",{className:`font-medium ${s.status==="active"?"text-teal-600":"text-red-600"}`,children:t(s.status)})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-4",children:[e.jsxs("h3",{className:"mb-3 flex items-center text-lg font-semibold text-gray-900",children:[e.jsx(M,{className:"mr-2 text-blue-600"}),"Payment Information"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid"}),e.jsxs("span",{className:"font-medium",children:["â‚¹",s.payment.amount]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Mode"}),e.jsx("span",{className:"font-medium",children:t(s.payment.mode)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Transaction ID"}),e.jsx("span",{className:"text-sm font-medium",children:s.payment.transactionId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Status"}),e.jsx("span",{className:`font-medium ${s.payment.status==="completed"?"text-teal-600":"text-red-600"}`,children:t(s.payment.status)})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"mb-3 flex items-center text-lg font-semibold text-gray-900",children:[e.jsx(l,{className:"mr-2 text-teal-600"}),"Your Membership Benefits"]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:s.type==="premium"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"mr-2 text-teal-500"}),e.jsx("span",{children:"Priority Support"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"mr-2 text-teal-500"}),e.jsx("span",{children:"Unlimited Projects"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"mr-2 text-teal-500"}),e.jsx("span",{children:"Advanced Analytics"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"mr-2 text-teal-500"}),e.jsx("span",{children:"Team Collaboration"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:"mr-2 text-teal-500"}),e.jsx("span",{children:"API Access"})]})]})})]}),e.jsx("div",{className:"mt-8 flex flex-wrap gap-4",children:o()&&e.jsx("button",{disabled:r,onClick:()=>i(!0),className:`rounded-md border border-red-500 px-4 py-2 text-red-600 transition-colors hover:bg-red-50 ${r?"cursor-not-allowed opacity-50":""} `,children:"Cancel Membership"})})]})]}):e.jsxs("div",{className:"rounded-lg bg-white p-8 text-center shadow-md",children:[e.jsx(A,{className:"mx-auto mb-4 text-4xl text-gray-400"}),e.jsx("h2",{className:"mb-2 text-2xl font-bold text-gray-900",children:"No Active Membership"}),e.jsx("p",{className:"mb-6 text-gray-600",children:"You don't have an active membership plan yet."}),e.jsx("button",{onClick:()=>u("/membership"),className:"rounded-md bg-teal-600 px-6 py-3 text-white transition-colors hover:bg-teal-700",children:"Become a Member"})]})]}),j&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black/30 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-start",children:[e.jsx("div",{className:"mt-1 mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:e.jsx(P,{className:"text-xl text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Cancel Membership"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Are you sure you want to cancel your membership?"}),e.jsxs("div",{className:"mt-4 rounded-md bg-red-50 p-3",children:[e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("strong",{children:"Important:"})," Cancelling your membership will:"]}),e.jsxs("ul",{className:"mt-2 list-inside list-disc text-sm text-red-700",children:[e.jsx("li",{children:"Remove all premium benefits immediately"}),o()&&e.jsx("li",{className:"font-semibold",children:"You are eligible for a full refund as it's within 7 days"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none",disabled:r,children:"Keep Membership"}),e.jsx("button",{type:"button",onClick:f,disabled:r,className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50",children:r?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"mr-2 h-4 w-4 animate-spin text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):"Yes, Cancel Membership"})]})]})})]})};export{Y as default};
