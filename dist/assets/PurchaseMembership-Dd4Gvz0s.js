import{a as u,y as c,d as V,u as S,j as e,b as P}from"./index-zXyjmdg6.js";import{U as F}from"./UserLayout-BGydKQLs.js";import{E as z,k as $,G as M,x as L,H as _,I as k,A as w,J as C,K as R,d as A,n as U,L as I,h as H,M as E}from"./index-C9kmxXqw.js";import"./iconBase-C3Tc1-PF.js";import"./index-CJ1hBGK6.js";function B(){const[t,s]=u.useState(!1),[n,p]=u.useState(!1),h=u.useRef(!1);return u.useEffect(()=>{if(typeof window>"u")return;if(window.Razorpay){p(!0);return}if(h.current)return;h.current=!0;const o=document.createElement("script");return o.src="https://checkout.razorpay.com/v1/checkout.js",o.async=!0,o.onload=()=>{p(!0),console.log("Razorpay script loaded successfully")},o.onerror=()=>{console.error("Failed to load Razorpay script"),c.error("Payment system failed to load. Please refresh.")},document.body.appendChild(o),()=>{document.body.contains(o)&&document.body.removeChild(o)}},[]),{initiatePayment:async({createOrderApi:o,verifyPaymentApi:g,onSuccess:x,onFailure:l,prefill:b})=>{try{if(!n){c.error("Payment system is loading. Please try again in a moment.");return}if(!window.Razorpay){c.error("Payment gateway not available. Please refresh the page.");return}s(!0);const m=await o(),i=m.data.order;if(!i?.id){c.error("Failed to create payment order.");return}const f={key:"rzp_test_Rr2cXyxH8sqfJO",amount:i.amount,currency:i.currency,name:"SooQuick",description:`${i.notes?.purpose?.toUpperCase()||"Payment"}`,order_id:i.id,handler:async function(d){console.log(d,"paymentresponse");try{const y=await g({razorpay_payment_id:d.razorpay_payment_id,razorpay_order_id:d.razorpay_order_id,razorpay_signature:d.razorpay_signature,purpose:i.notes?.purpose,referenceId:i.notes?.referenceId});s(!1),c.success("Payment Successful ✔"),x&&x(y.data,m.data)}catch(y){s(!1),console.error("Payment verification error:",y),c.error("Payment verification failed ❌"),l&&l(y)}},prefill:{name:b?.name||"",email:b?.email||"",contact:b?.phone||""},theme:{color:"#0b8263"},modal:{ondismiss:function(){console.log("Checkout closed by user"),s(!1)}}};i.notes&&(f.notes=i.notes);const j=new window.Razorpay(f);j.on("payment.failed",function(d){console.error("Payment failed:",d.error),s(!1),c.error(d.error.description||"Payment failed"),l&&l(d.error),s(!1)}),j.open()}catch(m){console.error("Razorpay payment error:",m),s(!1),c.error(m.response?.data?.error||"Payment failed. Please try again."),l&&l(m)}},loading:t,razorpayLoaded:n}}const D=({children:t,className:s,onClick:n})=>e.jsx("div",{className:`rounded-lg border border-gray-200 p-6 shadow-sm ${s}`,onClick:n,children:t}),G=({children:t,className:s})=>e.jsx("div",{className:`mb-6 ${s}`,children:t}),O=({children:t,className:s})=>e.jsx("h3",{className:`text-xl font-semibold ${s}`,children:t}),T=({children:t,className:s})=>e.jsx("p",{className:`text-gray-600 ${s}`,children:t}),Y=({children:t,className:s})=>e.jsx("div",{className:`mb-6 ${s}`,children:t}),q=({children:t,className:s})=>e.jsx("div",{className:s,children:t}),J=({children:t,className:s,variant:n="default",onClick:p,disabled:h=!1})=>{const v="py-2 px-4 rounded-md font-medium transition-colors",o={default:"bg-gray-800 text-white hover:bg-gray-900",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",silver:"bg-gray-600 text-white hover:bg-gray-700",gold:"bg-amber-600 text-white hover:bg-amber-700",platinum:"bg-purple-600 text-white hover:bg-purple-700"};return e.jsx("button",{className:`${v} ${o[n]} ${s} ${h?"cursor-not-allowed opacity-50":""}`,onClick:p,disabled:h,children:t})},Q=({children:t,className:s})=>e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-medium ${s}`,children:t}),K=()=>{const[t,s]=u.useState(null),[n,p]=u.useState("Monthly"),[h,v]=u.useState(!1),[o,g]=u.useState({text:"",type:""}),{user:x}=V(r=>r.user),l=S(),{initiatePayment:b,loading:m}=B();console.log(x,"uer");const i=(r,a)=>{s(r),p(a),g({text:"",type:""})},f=async r=>{if(r){x.email||l("/"),g({text:"",type:""});try{await b({createOrderApi:()=>P.createPaymentOrder({purpose:"membership",referenceId:r.id,amount:r.pricing[n]}),verifyPaymentApi:a=>P.verifyRazorpayPayment({...a,purpose:"membership",membershipType:r.id,planDuration:n,referenceId:r.id}),onSuccess:()=>{c.success("Membership activated successfully!"),l("/membership-info")},onFailure:a=>{console.error("Payment failed:",a),c.error("Membership payment failed")},prefill:{name:x?.firstName,email:x?.email,phone:x?.phone}})}catch(a){console.error("Purchase error:",a);let N="Failed to purchase membership";a.response&&a.response.data&&a.response.data.message&&(N=a.response.data.message),g({text:N,type:"error"})}}},j=[{name:"Service Posts",freeVendor:"Max 3",paidVendor:"Unlimited",icon:e.jsx(_,{className:"text-blue-500"})},{name:"Commission",freeVendor:"20%",paidVendor:"15% (tiered)",icon:e.jsx(k,{className:"text-blue-500"})},{name:"Search Visibility",freeVendor:"Low",paidVendor:"Priority / Featured",icon:e.jsx(w,{className:"text-blue-500"})},{name:"Badge",freeVendor:"None",paidVendor:"Verified / Premium",icon:e.jsx(C,{className:"text-blue-500"})},{name:"Payout",freeVendor:"5-7 days",paidVendor:"1–3 days",icon:e.jsx(R,{className:"text-blue-500"})},{name:"Dispute Handling",freeVendor:"Standard",paidVendor:"Priority",icon:e.jsx(A,{className:"text-blue-500"})},{name:"Ad Credits",freeVendor:"None",paidVendor:"₹500–₹2000 free/month",icon:e.jsx(U,{className:"text-blue-500"})},{name:"Customer Insights",freeVendor:"None",paidVendor:"Basic to Advanced",icon:e.jsx(I,{className:"text-blue-500"})},{name:"Leads Access",freeVendor:"General",paidVendor:"Guaranteed / Corporate / HNI",icon:e.jsx(H,{className:"text-blue-500"})},{name:"Support",freeVendor:"Email only",paidVendor:"Dedicated Manager (Platinum)",icon:e.jsx(E,{className:"text-blue-500"})}],d=[{id:"none",name:"Free",description:"Perfect for growing your vendor business",icon:e.jsx(C,{className:"h-6 w-6"}),color:"text-gray-600",borderColor:"border-gray-200",bgColor:"bg-white",popular:!1,pricing:{Monthly:0},features:["20% commission rate","Up to 3 service posts","Low priority listing in search","Verified badge","Payout (5-7 days)","Standard dispute handling","No monthly ad credits","No customer insights","Less access to premium leads","Email support"],commission:"20%",servicePosts:"3"},{id:"premium",name:"Premium",description:"For established vendors with high demand",icon:e.jsx(w,{className:"h-6 w-6"}),color:"text-amber-600",borderColor:"border-amber-200",bgColor:"bg-gradient-to-br from-amber-50 to-yellow-50",popular:!0,pricing:{Monthly:999,Yearly:9999},features:["15% commission rate","Unlimited service posts","Featured in search results","Premium badge","Fast payout (2-3 days)","Highest priority dispute handling","₹500-2000 monthly ad credits","Advanced customer insights","Access to corporate/HNI leads","Priority phone support"],commission:"15%",servicePosts:"Unlimited"}],y=["Monthly","Quarterly","Yearly"];return e.jsxs("div",{className:"mx-auto w-full max-w-7xl px-4 py-8",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold text-gray-900",children:"Upgrade Your Vendor Account"}),e.jsx("p",{className:"mx-auto max-w-3xl text-lg text-gray-600",children:"Reduce your commission rates, get more visibility, and grow your business with our premium vendor plans."})]}),o.text&&e.jsx("div",{className:`mb-6 rounded-lg p-4 text-center ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.text}),e.jsxs("div",{className:"mb-12 overflow-hidden rounded-lg bg-white shadow-md",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-teal-800 p-4 text-center text-white",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Free vs Paid Vendor Accounts"}),e.jsx("p",{className:"opacity-90",children:"Upgrade to unlock premium features and higher earnings"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-200",children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-900",children:"Feature"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-900",children:"Free Vendor"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-900",children:"Paid Vendor"})]})}),e.jsx("tbody",{children:j.map((r,a)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:r.icon}),e.jsx("span",{children:r.name})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(z,{className:"mr-1 text-red-500"}),e.jsx("span",{children:r.freeVendor})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx($,{className:"mr-1 text-green-500"}),e.jsx("span",{children:r.paidVendor})]})})]},a))})]})})})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"mb-6 text-center text-2xl font-bold text-gray-900",children:"Vendor Subscription Plans"}),e.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:d.map(r=>e.jsxs(D,{className:`relative ${r.bgColor} border-2 ${r.borderColor} transition-all duration-300 hover:shadow-lg ${t===r.id?"ring-2 ring-blue-500":""}`,children:[r.popular&&e.jsx(Q,{className:"absolute -top-3 left-1/2 -translate-x-1/2 transform bg-amber-500 text-white",children:"Most Popular"}),e.jsxs(G,{className:"pb-4 text-center",children:[e.jsx("div",{className:`mx-auto mb-4 w-fit rounded-full bg-gray-100 p-3 ${r.color}`,children:r.icon}),e.jsx(O,{className:`text-2xl font-bold ${r.color}`,children:r.name}),e.jsx(T,{className:"text-gray-600",children:r.description}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"rounded-lg bg-blue-50 p-2 text-center",children:[e.jsx("div",{className:"text-sm text-blue-700",children:"Commission"}),e.jsx("div",{className:"font-bold text-blue-900",children:r.commission})]}),e.jsxs("div",{className:"rounded-lg bg-green-50 p-2 text-center",children:[e.jsx("div",{className:"text-sm text-green-700",children:"Service Posts"}),e.jsx("div",{className:"font-bold text-green-900",children:r.servicePosts})]})]})]}),e.jsxs(Y,{children:[e.jsx("div",{className:"mb-6 flex items-center justify-center gap-4",children:y.map(a=>r.pricing[a]?e.jsxs("button",{className:`rounded-md px-4 py-2 text-sm font-medium transition-colors ${t===r.id&&n===a?r.id==="silver"?"bg-gray-600 text-white":r.id==="gold"?"bg-amber-600 text-white":"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>i(r.id,a),children:[e.jsx("div",{children:a}),e.jsxs("div",{className:"font-bold",children:["₹",r.pricing[a]]})]},a):null)}),e.jsx("div",{className:"space-y-3",children:r.features.map((a,N)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx(M,{className:"mt-1 mr-2 h-4 w-4 flex-shrink-0 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:a})]},N))})]}),e.jsx(q,{children:e.jsx(J,{className:"w-full bg-amber-200 hover:bg-amber-300",variant:r.id,onClick:()=>f(r),disabled:m||t!==r.id,children:m?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"mr-2 animate-spin"}),"Processing..."]}):t===r.id?`Subscribe - ₹${r.pricing[n]}`:"Select Plan"})})]},r.id))})]})]})},se=()=>e.jsx(F,{children:e.jsx(K,{})});export{se as default};
