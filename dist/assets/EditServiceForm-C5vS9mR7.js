import{a as o,j as e,k as ge,b as $,y as j}from"./index-CZcwaId7.js";import{c as _,d as pe,e as I}from"./index-CP5vjhFU.js";const he=({onServiceAreasChange:h})=>{const[N,q]=o.useState([]),[i,c]=o.useState(!1),[m,T]=o.useState([]),[u,b]=o.useState([]),[R,w]=o.useState(""),[f,L]=o.useState(!1),[D,p]=o.useState(null),S=async r=>{L(!0),p(null);try{const n=await(await ge(`https://api.postalpincode.in/pincode/${r}`)).data;if(console.log("data received",n),n[0].Status==="Success"&&n[0].PostOffice){const x=n[0].PostOffice.map(y=>({pincode:y.Pincode,areaName:y.Name,district:y.District,state:y.State}));T(x),w(r)}else p("No data found for this pincode"),T([])}catch(l){p("Failed to fetch pincode data"),console.error("API Error:",l)}finally{L(!1)}},O=(r,l)=>{r.preventDefault(),l&&l.length===6?S(l):p("Please enter a valid 6-digit pincode")},P=r=>{b(l=>l.some(n=>n.areaName===r.areaName)?l.filter(n=>n.areaName!==r.areaName):[...l,r])},W=()=>{m.length>0&&(u.length===m.length?b([]):b(m))},E=()=>{if(u.length>0){const r=u.map(n=>({pincode:n.pincode,areaName:n.areaName,city:n.district,state:n.state})),l=[...N.filter(n=>!r.some(x=>x.pincode===n.pincode&&x.areaName===n.areaName)),...r];q(l),h&&h(l),b([]),T([]),w(""),p(null)}},V=(r,l)=>{const n=N.filter(x=>!(x.pincode===r&&x.areaName===l));q(n),h&&h(n)},k=()=>{c(!1),T([]),b([]),w(""),p(null)};return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Service Areas *"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:N.map((r,l)=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800",children:[r.pincode," - ",r.areaName,e.jsxs("button",{type:"button",onClick:()=>V(r.pincode,r.areaName),className:"ml-1.5 flex h-4 w-4 flex-shrink-0 items-center justify-center rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500 focus:outline-none",children:[e.jsxs("span",{className:"sr-only",children:["Remove ",r.pincode," - ",r.areaName]}),e.jsx("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:e.jsx("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})]})]}),e.jsxs("div",{className:"mt-1 ml-2 text-xs text-gray-600",children:[r.city,", ",r.state]})]},`${r.pincode}-${r.areaName}-${l}`))}),N.length===0&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No service areas selected yet"})]}),e.jsxs("button",{type:"button",onClick:()=>c(!0),className:"inline-flex items-center rounded-md border border-transparent bg-[#0b8263] px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none",children:[e.jsx("svg",{className:"mr-2 -ml-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),"Add Service Areas"]}),i&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 h-full w-full overflow-y-auto bg-gray-600/30",children:e.jsx("div",{className:"relative top-20 mx-auto w-11/12 rounded-md border bg-white p-5 shadow-lg md:w-3/4 lg:w-1/2",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b pb-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add Service Areas"}),e.jsx("button",{onClick:k,className:"text-gray-400 hover:text-gray-500",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",name:"pincode",placeholder:"Enter 6-digit pincode",maxLength:"6",value:R,onChange:r=>w(r.target.value.replace(/\D/g,"").slice(0,6)),className:"rounded-l-md border border-r-0 border-gray-300 px-3 py-2 focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none"}),e.jsx("button",{type:"button",onClick:r=>O(r,R),className:"rounded-r-md bg-[#0b8263] px-4 py-2 text-white hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:outline-none",children:"Search"})]}),f&&e.jsx("div",{className:"my-4 text-center",children:e.jsx("p",{children:"Loading pincode data..."})}),D&&e.jsx("div",{className:"my-4 rounded-md bg-red-50 p-4",children:e.jsx("p",{className:"text-red-800",children:D})}),m.length>0&&!f&&e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsxs("h4",{className:"text-md mb-2 font-medium text-gray-700",children:["Select areas for pincode ",R,":"]}),e.jsxs("p",{className:"mb-3 text-sm text-gray-600",children:["Found ",m.length," area(s) for this pincode"]}),m.length>1&&e.jsx("div",{className:"mb-3",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.length===m.length,onChange:W,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:u.length===m.length?"Deselect all":"Select all areas"})]})}),e.jsx("div",{className:"max-h-60 overflow-y-auto rounded-md border p-2",children:m.map((r,l)=>e.jsx("div",{className:"mb-2",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.some(n=>n.areaName===r.areaName),onChange:()=>P(r),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:[r.areaName," (",r.district,", ",r.state,")"]})]})},l))}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{type:"button",onClick:E,disabled:u.length===0,className:"rounded-md bg-[#0b8263] px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-400",children:["Add ",u.length," Selected Area",u.length!==1?"s":""]})})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{type:"button",onClick:k,className:"rounded-md bg-gray-300 px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-400 focus:ring-2 focus:ring-gray-500 focus:outline-none",children:"Close"})})]})})})]})},ve=({serviceId:h,onSuccess:N,onCancel:q,service:i})=>{const[c,m]=o.useState({serviceName:"",mainCategory:"",category:"",serviceType:"",pricingType:"Fixed",servicePrice:"",availability:"",serviceAreas:[],scopeOfWork:"",workingStartTime:"",workingEndTime:"",workingDays:[]}),[T,u]=o.useState(!0),[b,R]=o.useState(!1),[w,f]=o.useState(""),[L,D]=o.useState(""),p=4,[S,O]=o.useState([]),[P,W]=o.useState([]),[E,V]=o.useState([]),[k,r]=o.useState([]),[l,n]=o.useState(null),[x,y]=o.useState([]),[C,z]=o.useState(null),[F,be]=o.useState([]),[U,X]=o.useState(!1),[B,H]=o.useState(!1),[G,J]=o.useState(!1),Q=["Repair & Maintenance","Cleaning & Hygiene Services","Fitness & Grooming"],Z={"Repair & Maintenance":["Electrician","Plumber","Carpenter","AC Repair","Appliance Repair","Painting","Pest Control","RO Service","Computer Repair","Internet Services"],"Cleaning & Hygiene Services":["Home Cleaning","Sofa Cleaning","Carpet Cleaning","Bathroom Cleaning","Kitchen Cleaning","Office Cleaning","Water Tank Cleaning"],"Fitness & Grooming":["Salon Services","Mehendi Services"]},ee=["Fixed","Per Square Feet","Per Hour","Per Session","Custom"],se=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];o.useEffect(()=>{i&&(()=>{try{u(!0),m({serviceName:i.serviceName||"",mainCategory:i.mainCategory||"",category:i.category||"",serviceType:i.serviceType||"",pricingType:i.pricingType||"Fixed",servicePrice:i.servicePrice||"",availability:i.availability||"",serviceAreas:i.serviceAreas||[],scopeOfWork:i.scopeOfWork||"",workingStartTime:i.workingStartTime||"",workingEndTime:i.workingEndTime||"",workingDays:i.workingDays||[]}),r(i?.documents?.photos||[]),n(i?.documents?.video?.[0]||null),O(i?.serviceAreas||[]),W([]),V([])}catch(a){f("Failed to initialize service data"),console.error("Error initializing service:",a)}finally{u(!1)}})()},[i]);const te=s=>{Array.isArray(s)&&W(a=>[...a,...s].filter((v,M,A)=>M===A.findIndex(K=>K.pincode===v.pincode&&K.areaName===v.areaName)))},ae=s=>{S.find(t=>t._id===s)&&(V(t=>[...t,s]),O(t=>t.filter(d=>d._id!==s)))},re=s=>{W(a=>a.filter((t,d)=>d!==s))},ie=s=>{const a=i?.serviceAreas?.find(t=>t._id===s);a&&(V(t=>t.filter(d=>d!==s)),O(t=>[...t,a]))},le=s=>{m(a=>({...a,workingDays:a.workingDays.includes(s)?a.workingDays.filter(t=>t!==s):[...a.workingDays,s]}))},g=s=>{const{name:a,value:t}=s.target;m(a==="mainCategory"?d=>({...d,mainCategory:t,category:""}):d=>({...d,[a]:t}))},ne=s=>{const a=Array.from(s.target.files),t=p-(k.length-F.length)-x.length;if(a.length>t){j.error(`You can upload only ${t} more images`);return}y(d=>[...d,...a])},de=s=>{y(a=>a.filter((t,d)=>d!==s))},oe=async s=>{if(i?.documents?.photos?.includes(s)){H(!0);try{const t=await $.deleteServiceImage({serviceId:h,imagePath:s,type:"photo"});r(d=>d.filter(v=>v!==s)),t.data&&t.data.message&&j.success("Image deleted successfully")}catch(t){console.error("Failed to delete image",t),j.error("Failed to delete image"),f("Failed to delete image")}finally{H(!1)}}else y(t=>t.filter(d=>!(d instanceof File&&URL.createObjectURL(d)===s)))},ce=async()=>{if(i?.documents?.video?.includes(l)&&l){J(!0);try{const a=await $.deleteServiceImage({serviceId:h,imagePath:l,type:"video"});n(null),a.data&&a.data.message&&j.success("Video deleted successfully")}catch(a){console.error("Failed to delete video",a),j.error("Failed to delete video"),f("Failed to delete video")}finally{J(!1)}}else C&&z(null)},me=()=>{X(!1),n(i?.documents?.video?.[0]||null)},Y=s=>{s.target.files[0]&&z(s.target.files[0])},xe=()=>{z(null)},ue=async s=>{s.preventDefault(),R(!0),f(""),D("");const a=[...S,...P].flat().filter(t=>t&&typeof t=="object"&&t.pincode&&t.areaName&&t.city&&t.state);try{const t=new FormData,d={...c,servicePrice:parseInt(c.servicePrice),serviceAreas:a};Object.entries(d).forEach(([M,A])=>{Array.isArray(A)?t.append(M,JSON.stringify(A)):A!=null&&t.append(M,A.toString())}),E.length>0&&t.append("areasToRemove",JSON.stringify(E)),F.length>0&&t.append("imagesToRemove",JSON.stringify(F)),U&&t.append("videoToRemove","true"),x.forEach(M=>{t.append("images",M)}),C&&t.append("video",C);const v=await $.updateService(h,t,{headers:{"Content-Type":"multipart/form-data"}});console.log("Update response:",v.data),v.data.service.isApproved==="pending"?(j.success("Service updated successfully! Your changes require admin approval."),D("Service updated successfully! Your changes require admin approval.")):(j.success("Service updated successfully!"),D("Service updated successfully!")),N&&N(v.data.service)}catch(t){const d=t.response?.data?.message||"Failed to update service";f(d),j.error(d),console.error("Error updating service:",t)}finally{R(!1)}};return T?e.jsx("div",{className:"py-8 text-center",children:"Loading service data..."}):e.jsxs("div",{className:"font-mont mx-auto max-w-4xl rounded-lg bg-white p-6 shadow-md",children:[e.jsx("h2",{className:"mb-6 text-2xl font-bold text-gray-800",children:"Edit Service"}),w&&e.jsx("div",{className:"mb-4 rounded-md bg-red-100 p-3 text-red-700",children:w}),L&&e.jsx("div",{className:"mb-4 rounded-md bg-green-100 p-3 text-green-700",children:L}),i?.isApproved==="rejected"&&i?.rejectionMessage&&e.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"mt-0.5 h-5 w-5 flex-shrink-0 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.698-.833-2.464 0L4.232 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800",children:"Service Was Rejected"}),e.jsx("p",{className:"mt-1 text-red-700",children:i.rejectionMessage}),e.jsx("p",{className:"mt-2 text-sm text-red-600",children:"Please address the issues above before resubmitting for approval."})]})]})}),e.jsx("form",{onSubmit:ue,children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Service Name *"}),e.jsx("input",{type:"text",name:"serviceName",value:c.serviceName,onChange:g,className:"w-full rounded-md border px-3 py-2 focus:border-teal-500 focus:ring-teal-500",required:!0})]}),e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Main Category *"}),e.jsxs("select",{name:"mainCategory",value:c.mainCategory,onChange:g,className:"w-full rounded-md border px-3 py-2 focus:border-teal-500 focus:ring-teal-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Main Category"}),Q.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Category *"}),e.jsxs("select",{name:"category",value:c.category,onChange:g,disabled:!c.mainCategory,className:"w-full rounded-md border px-3 py-2 focus:border-teal-500 focus:ring-teal-500 disabled:bg-gray-100",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),c.mainCategory&&Z[c.mainCategory]?.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Service Type *"}),e.jsx("input",{type:"text",name:"serviceType",value:c.serviceType,onChange:g,className:"w-full rounded-md border px-3 py-2 focus:border-teal-500 focus:ring-teal-500",placeholder:"e.g., Fan installation/repair, Pipe leakage repair, 1BHK home cleaning",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Describe the specific service you offer"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Pricing Type"}),e.jsx("select",{name:"pricingType",value:c.pricingType,onChange:g,className:"w-full rounded-md border px-3 py-2 focus:border-teal-500 focus:ring-teal-500",children:ee.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Service Price (₹) *"}),e.jsx("input",{type:"text",name:"servicePrice",value:c.servicePrice,onChange:g,className:"w-full rounded-md border px-3 py-2 focus:border-teal-500 focus:ring-teal-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Availability *"}),e.jsxs("select",{name:"availability",value:c.availability,onChange:g,className:"w-full rounded-md border px-3 py-2 focus:border-teal-500 focus:ring-teal-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Availability"}),e.jsx("option",{value:"Weekdays",children:"Weekdays"}),e.jsx("option",{value:"Weekends",children:"Weekends"}),e.jsx("option",{value:"Anytime",children:"Anytime"}),e.jsx("option",{value:"On Request",children:"On Request"})]})]}),e.jsxs("div",{className:"col-span-2 border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Working Hours"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Working Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:se.map(s=>e.jsx("button",{type:"button",onClick:()=>le(s),className:`rounded-full px-3 py-1 text-sm font-medium transition-colors ${c.workingDays.includes(s)?"border border-blue-300 bg-blue-100 text-blue-800":"border border-gray-300 bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:s.substring(0,3)},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Start Time"}),e.jsx("input",{type:"time",name:"workingStartTime",value:c.workingStartTime,onChange:g,className:"w-full rounded-md border px-3 py-2 focus:border-teal-500 focus:ring-teal-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"End Time"}),e.jsx("input",{type:"time",name:"workingEndTime",value:c.workingEndTime,onChange:g,className:"w-full rounded-md border px-3 py-2 focus:border-teal-500 focus:ring-teal-500"})]})]})]}),e.jsxs("div",{className:"col-span-2 border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Service Areas"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"mb-2 text-sm font-medium text-gray-700",children:"Current Service Areas"}),e.jsx("div",{className:"space-y-2",children:S.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No service areas added"}):S.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border bg-gray-50 p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.areaName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.pincode," • ",s.city,", ",s.state]})]}),e.jsx("div",{className:"flex gap-2",children:E.includes(s._id)?e.jsxs("button",{type:"button",onClick:()=>ie(s._id),className:"flex items-center gap-1 rounded-md bg-green-100 px-2 py-1 text-xs text-green-800 hover:bg-green-200",children:[e.jsx(_,{className:"text-xs"})," Restore"]}):e.jsxs("button",{type:"button",onClick:()=>ae(s._id),className:"flex items-center gap-1 rounded-md bg-red-100 px-2 py-1 text-xs text-red-800 hover:bg-red-200",children:[e.jsx(pe,{className:"text-xs"})," Remove"]})})]},s._id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"mb-2 text-sm font-medium text-gray-700",children:"New Service Areas (To be added)"}),e.jsx("div",{className:"space-y-2",children:P.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No new areas added"}):P.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border bg-green-50 p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.areaName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.pincode," • ",s.city,", ",s.state]})]}),e.jsxs("button",{type:"button",onClick:()=>re(a),className:"flex items-center gap-1 rounded-md bg-red-100 px-2 py-1 text-xs text-red-800 hover:bg-red-200",children:[e.jsx(I,{className:"text-xs"})," Remove"]})]},a))})]}),e.jsx("div",{className:"mb-4",children:e.jsx(he,{onServiceAreasChange:te,label:"Add New Service Area"})}),e.jsx("div",{className:"rounded-md bg-blue-50 p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Summary:"})," ",S.length," existing area(s), ",P.length," new area(s) to add,"," ",E.length," area(s) to remove"]})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Scope of Work"}),e.jsx("textarea",{name:"scopeOfWork",value:c.scopeOfWork,onChange:g,rows:"3",className:"w-full rounded-md border px-3 py-2 focus:border-teal-500 focus:ring-teal-500",placeholder:"What exactly will you do? Include deliverables, timeline, etc."})]}),e.jsxs("div",{className:"col-span-2 border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Service Images (Max 4)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[k.map((s,a)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`https://api.sooquick.com${s}`,className:"h-32 w-full rounded-md object-cover",alt:"service"}),e.jsx("button",{type:"button",onClick:()=>oe(s),disabled:B,className:"absolute top-1 right-1 rounded-full bg-red-600 px-2 py-1 text-xs text-white disabled:opacity-50",children:e.jsx(I,{className:"text-sm"})}),B&&e.jsx("div",{className:"bg-opacity-50 absolute inset-0 flex items-center justify-center rounded-md bg-black",children:e.jsx("div",{className:"text-white",children:"Deleting..."})})]},a)),x.map((s,a)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(s),className:"h-32 w-full rounded-md object-cover",alt:"preview"}),e.jsx("button",{type:"button",onClick:()=>de(a),className:"absolute top-1 right-1 rounded-full bg-red-600 p-1 text-xs text-white",children:e.jsx(I,{className:"text-sm"})}),e.jsx("div",{className:"absolute bottom-1 left-1 rounded-full bg-green-600 px-2 py-0.5 text-xs text-white",children:"New"})]},a)),k.length-F.length+x.length<p&&e.jsxs("label",{className:"flex h-32 cursor-pointer flex-col items-center justify-center rounded-md border-2 border-dashed border-gray-300 text-gray-400 hover:border-teal-500 hover:text-teal-500",children:[e.jsx(_,{className:"text-2xl"}),e.jsx("span",{className:"mt-1 text-xs",children:"Add Image"}),e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:ne,multiple:!0})]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[k.length-F.length," existing image(s),"," ",x.length," new image(s), ",F.length," image(s) to remove"]})]}),e.jsxs("div",{className:"col-span-2 border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Service Video (Max 1)"}),l&&e.jsxs("div",{className:"relative w-full max-w-md",children:[e.jsx("video",{src:l,controls:!0,className:"w-full rounded-md"}),e.jsx("button",{type:"button",onClick:ce,disabled:G,className:"absolute top-2 right-2 rounded-full bg-red-600 p-2 text-white disabled:opacity-50",children:e.jsx(I,{className:"text-sm"})}),G&&e.jsx("div",{className:"bg-opacity-50 absolute inset-0 flex items-center justify-center rounded-md bg-black",children:e.jsx("div",{className:"text-white",children:"Deleting..."})})]}),U&&e.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"text-red-600"}),e.jsx("span",{className:"text-sm text-red-800",children:"Video marked for deletion"})]}),e.jsx("button",{type:"button",onClick:me,className:"text-sm text-blue-600 hover:text-blue-800",children:"Undo"})]})}),C&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative w-full max-w-md",children:[e.jsx("video",{src:URL.createObjectURL(C),controls:!0,className:"w-full rounded-md"}),e.jsx("button",{type:"button",onClick:xe,className:"absolute top-2 right-2 rounded-full bg-red-600 p-2 text-white",children:e.jsx(I,{className:"text-sm"})})]})}),!l&&!C&&!U&&e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex cursor-pointer flex-col items-center justify-center rounded-md border-2 border-dashed border-gray-300 p-6 text-gray-400 hover:border-teal-500 hover:text-teal-500",children:[e.jsx(_,{className:"text-2xl"}),e.jsx("span",{className:"mt-2",children:"Add Video"}),e.jsx("input",{type:"file",accept:"video/*",hidden:!0,onChange:Y})]})}),U&&!C&&e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex cursor-pointer flex-col items-center justify-center rounded-md border-2 border-dashed border-gray-300 p-6 text-gray-400 hover:border-teal-500 hover:text-teal-500",children:[e.jsx(_,{className:"text-2xl"}),e.jsx("span",{className:"mt-2",children:"Add New Video"}),e.jsx("input",{type:"file",accept:"video/*",hidden:!0,onChange:Y})]})})]}),e.jsxs("div",{className:"col-span-2 mt-8 flex justify-end space-x-3 border-t border-gray-200 pt-6",children:[e.jsx("button",{type:"button",onClick:q,className:"rounded-md border border-gray-300 px-4 py-2 text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b,className:"rounded-md bg-[#0b8263] px-4 py-2 text-white hover:bg-teal-700 disabled:opacity-50",children:b?"Updating...":"Update Service"})]})]})})]})};export{ve as E,he as P};
