import{c as R,u as X,h as Z,j as e,i as Q,a as b,k as ee,d as z,y as q,l as se,m as te,n as ae,o as Y,p as re,q as le,t as O,b as K,v as W,w as ne}from"./index-Csv1W7r9.js";import{x as V,y as de}from"./index-CLZ7CvZO.js";import{a as ie}from"./index-DCNwazUG.js";import{U as oe}from"./UserLayout-G9Kx7Ia8.js";import"./iconBase-CPIqMA7V.js";import"./App-Bqt38oRm.js";const ce=()=>{const d=R(),a=X(),r=Z(),m=new URLSearchParams(r.search).get("tab")||"profile",i=[{id:"profile",name:"Profile"},{id:"kyc",name:"KYC"}],y=t=>{a(`?tab=${t}`),d(Q(t==="kyc"?1:0))};return e.jsx("div",{className:"sticky top-0 z-10 flex w-full items-center justify-center overflow-y-hidden py-2 md:py-2",children:e.jsx("div",{className:"tabs flex items-center justify-center gap-2 rounded-full bg-gray-200 px-4 py-2 md:gap-2",children:i.map(t=>e.jsx("div",{className:`cursor-pointer rounded-full px-4 py-1 transition-colors ${m===t.id?"bg-[#0b8263] text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,onClick:()=>y(t.id),children:t.name},t.id))})})},me=({onPincodeSelect:d,currentPincode:a=""})=>{const[r,o]=b.useState(!1),[m,i]=b.useState([]),[y,t]=b.useState(null),[w,k]=b.useState(a),[D,F]=b.useState(!1),[P,g]=b.useState(null),j=async x=>{F(!0),g(null);try{const f=await(await ee(`https://api.postalpincode.in/pincode/${x}`)).data;if(f[0].Status==="Success"&&f[0].PostOffice){const n=f[0].PostOffice.map(u=>({pincode:u.Pincode,areaName:u.Name,district:u.District,state:u.State,country:"India"}));i(n),n.length===1&&t(n[0])}else g("No data found for this pincode"),i([])}catch(C){g("Failed to fetch pincode data"),console.error("API Error:",C)}finally{F(!1)}},h=x=>{x.preventDefault(),w&&w.length===6?j(w):g("Please enter a valid 6-digit pincode")},A=x=>{t(x)},S=()=>{y&&(d&&d(y),N())},N=()=>{o(!1),i([]),t(null),g(null)};return e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Postal Code"}),e.jsx("div",{className:"flex",children:e.jsx("button",{type:"button",onClick:()=>o(!0),className:"ml-2 inline-flex items-center rounded-md border border-transparent bg-teal-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none",children:"Add Pincode"})}),r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Find Your Area"}),e.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enter 6-digit Pincode"}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsx("input",{type:"text",value:w,onChange:x=>k(x.target.value.replace(/\D/g,"").slice(0,6)),className:"block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",placeholder:"e.g., 110001"}),e.jsx("button",{type:"button",onClick:h,className:"ml-2 inline-flex items-center rounded-md border border-transparent bg-teal-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none",children:"Search"})]})]}),D&&e.jsx("div",{className:"my-4 text-center",children:e.jsx("p",{children:"Loading pincode data..."})}),P&&e.jsx("div",{className:"my-4 rounded-md bg-red-50 p-4",children:e.jsx("p",{className:"text-red-800",children:P})}),m.length>0&&!D&&e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsx("h4",{className:"text-md mb-2 font-medium text-gray-700",children:"Select your area:"}),e.jsx("div",{className:"max-h-60 overflow-y-auto rounded-md border p-2",children:m.map((x,C)=>e.jsxs("div",{className:`mb-2 cursor-pointer rounded-md p-3 ${y?.areaName===x.areaName?"border border-teal-200 bg-teal-50":"hover:bg-gray-50"}`,onClick:()=>A(x),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",checked:y?.areaName===x.areaName,onChange:()=>A(x),className:"h-4 w-4 text-teal-600 focus:ring-teal-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:x.areaName})]}),e.jsxs("div",{className:"mt-1 ml-6 text-xs text-gray-500",children:[x.district,", ",x.state]})]},C))}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:S,disabled:!y,className:"w-full rounded-md bg-teal-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-400",children:"Select Area"})})]})]})]})})]})},ue=({size:d="xl"})=>{const a=R(),r=b.useRef(null),[o,m]=b.useState(!1),[i,y]=b.useState(null),[t,w]=b.useState(!1),{user:k}=z(c=>c.user),{firstName:D,lastName:F,profileImage:P}=k||{},g={sm:"w-20 h-20",md:"w-32 h-32",lg:"w-40 h-40",xl:"w-48 h-48"},j={sm:"text-xl",md:"text-2xl",lg:"text-3xl",xl:"text-4xl"},h=()=>P?P.startsWith("http")?P:`https://api.sooquick.com/${P.replace(/^\//,"")}`:null,A=c=>{if(!c)return;if(!["image/jpeg","image/png","image/webp"].includes(c.type)){q.error("Please select a valid image file (JPEG, PNG, WebP)");return}const I=5*1024*1024;if(c.size>I){q.error("Image size must be less than 5MB");return}const B=new FileReader;B.onload=M=>{y(M.target.result),S(c)},B.readAsDataURL(c)},S=async c=>{m(!0);try{const v=new FormData;v.append("image",c),await a(se(v)).unwrap(),q.success("Profile picture updated successfully!")}catch(v){q.error(v||"Failed to upload image"),y(null)}finally{m(!1)}},N=c=>{c.preventDefault(),w(!1);const v=c.dataTransfer.files[0];v&&A(v)},x=c=>{c.preventDefault(),w(!0)},C=()=>{w(!1)},f=()=>{if(!D&&!F)return"U";const c=`${D||""} ${F||""}`.trim();return c?c.split(" ").map(v=>v[0]).join("").toUpperCase().slice(0,2):"U"},n=i||h(),u=i||h();return e.jsxs("div",{className:"group relative",children:[e.jsxs("div",{className:`${g[d]} relative cursor-pointer overflow-hidden rounded-full border-4 border-white bg-gradient-to-br from-teal-100 to-blue-100 shadow-lg transition-all duration-300 ${t?"scale-105 ring-4 ring-teal-300":"hover:scale-105"} ${o?"opacity-70":""}`,onClick:()=>!o&&r.current?.click(),onDrop:N,onDragOver:x,onDragLeave:C,children:[n?e.jsx("img",{src:u,alt:`${D||""} ${F||""}`.trim()||"Profile",className:"h-full w-full object-cover",onError:c=>{c.target.style.display="none"}}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("span",{className:`font-bold text-teal-600 ${j[d]}`,children:f()})}),o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-white"})}),!o&&e.jsx("div",{className:`absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition-opacity duration-300 group-hover:opacity-100 ${t?"opacity-100":""}`,children:e.jsxs("div",{className:"text-center text-white",children:[e.jsxs("svg",{className:"mx-auto mb-1 h-8 w-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("p",{className:"text-xs font-medium",children:t?"Drop to upload":"Click to upload"})]})})]}),e.jsx("button",{type:"button",onClick:()=>!o&&r.current?.click(),disabled:o,className:"absolute -right-2 -bottom-2 flex h-10 w-10 items-center justify-center rounded-full border-4 border-white bg-teal-500 text-white shadow-lg transition-all duration-200 hover:bg-teal-600 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50",title:"Change profile picture",children:o?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-white"}):e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})})}),e.jsx("input",{type:"file",ref:r,className:"hidden",accept:"image/*",onChange:c=>{const v=c.target.files[0];v&&A(v),c.target.value=""}}),t&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:e.jsxs("div",{className:"max-w-md rounded-2xl bg-white p-8 text-center shadow-2xl",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-teal-100",children:e.jsx("svg",{className:"h-10 w-10 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsx("h3",{className:"mb-2 text-xl font-bold text-gray-800",children:"Drop your image"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Release to upload your profile picture"}),e.jsx("div",{className:"rounded-lg bg-gray-50 p-3 text-sm text-gray-500",children:"Supports: JPEG, PNG, WebP (Max 5MB)"})]})})]})},xe=()=>{const d=R(),{user:a,status:r,error:o}=z(s=>s.user),{firstName:m,lastName:i,email:y,phone:t,addresses:w,dob:k,gender:D,twoFactorEnabled:F,profileImage:P}=a||{},[g,j]=b.useState({firstName:"",lastName:"",email:"",phone:"",addresses:[],dob:"",gender:"",twoFactorEnabled:!1}),[h,A]=b.useState(!1),[S,N]=b.useState(!1),[x,C]=b.useState({addressType:"home",street:"",building:"",city:"",state:"",postalCode:"",country:"India",isDefault:!1}),[f,n]=b.useState({});b.useEffect(()=>{d(te())},[d]),b.useEffect(()=>{r==="succeeded"&&A(!1)},[r]),b.useEffect(()=>{a&&j({firstName:m||"",lastName:i||"",email:y||"",phone:t||"",addresses:w||[{building:"",street:"",city:"",state:"",postalCode:"",country:""}],dob:k||"",gender:D||"",twoFactorEnabled:F||!1})},[a,m,i,y,t,w,k,D,F]);const u=s=>{const{name:l,value:p}=s.target;j($=>({...$,[l]:p}))},c=()=>{const s={};g.firstName.trim()||(s.firstName="First name is required"),g.lastName.trim()||(s.lastName="Last name is required"),g.dob||(s.dob="Please enter your DOB"),["Male","Female","Other"].includes(g.gender)||(s.gender="Please select a valid gender");const l={};return g.addresses.forEach((p,$)=>{const L={};p.building?.trim()||(L.building="Building/flat is required"),p.street?.trim()||(L.street="Street is required"),p.city?.trim()||(L.city="City is required"),p.state?.trim()||(L.state="State is required"),p.postalCode?.trim()||(L.postalCode="Postal code is required"),Object.keys(L).length>0&&(l[$]=L)}),Object.keys(l).length>0&&(s.addresses=l),s},v=async s=>{s.preventDefault();const l=c();if(Object.keys(l).length>0){n(l);return}n({});try{console.log(FormData,"formdata"),await d(ae(g)).unwrap(),q.success("Profile updated successfully!"),A(!1)}catch(p){console.log(p),q.error(p.message||"Failed to update profile")}},I=()=>{j({firstName:m||"",lastName:i||"",email:y||"",phone:t||"",addresses:w||[{street:"",city:"",building:"",state:"",postalCode:"",country:""}],dob:k||"",gender:D||"",twoFactorEnabled:F||!1}),A(!1)};if(r==="loading"&&!a)return e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(V,{className:"animate-spin text-2xl text-teal-500"})});const B=s=>{const l=g.addresses[s],p=g.addresses.filter(($,L)=>L!==s);l.isDefault&&p.length>0&&(p[0].isDefault=!0),j($=>({...$,addresses:p}))},M=s=>{const l=g.addresses.map((p,$)=>({...p,isDefault:$===s}));j(p=>({...p,addresses:l}))},J=()=>{const s=g.addresses.map(l=>({...l,isDefault:x.isDefault?!1:l.isDefault}));s.push({...x,isDefault:g.addresses.length===0||x.isDefault}),j(l=>({...l,addresses:s})),C({addressType:"home",building:"",street:"",city:"",state:"",postalCode:"",country:"India",isDefault:!1}),N(!1)},E=(s,l,p)=>{j($=>{const L=[...$.addresses];return L[s]={...L[s],[l]:p},{...$,addresses:L}})},_=s=>{C(l=>({...l,postalCode:s.pincode,city:s.district,state:s.state,street:s.areaName,country:s.country||"India"}))};return e.jsx("div",{className:"font-mont mx-auto max-w-md px-4 py-8 sm:max-w-lg sm:px-6 lg:max-w-6xl lg:px-8",children:e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow-xl",children:[e.jsx("div",{className:"mb-6 flex flex-col items-start justify-between gap-6 border-b pb-6 sm:flex-row sm:items-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 md:flex-row",children:[e.jsx(ue,{currentImage:`https://api.sooquick.com${P}`,userName:`${m} ${i}`,size:"xl"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[m," ",i]}),e.jsx("p",{className:"text-gray-600",children:y}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Click on the profile picture to upload a new one"})]})]})}),e.jsxs("div",{className:"mb-6 flex items-center justify-between border-b pb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"My Settings"}),e.jsxs("button",{type:"button",onClick:()=>A(s=>!s),className:`z-30 flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium ${h?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-green-100 text-green-700 hover:bg-green-200"} transition-colors`,children:[e.jsx(ie,{}),h?"Cancel":"Edit"]})]}),r==="failed"&&e.jsxs("div",{className:"rounded bg-red-100 p-4 text-red-700",children:["Error: ",o||"Failed to load user data"]}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"First Name"}),e.jsx("input",{type:"text",name:"firstName",value:g.firstName,onChange:u,disabled:!h,className:`rounded-md border px-3 py-2 ${h?"border-gray-300 focus:border-teal-500 focus:ring-teal-500":"border-gray-200 bg-gray-50"}`}),f.firstName&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.firstName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",value:g.lastName,onChange:u,disabled:!h,className:`rounded-md border px-3 py-2 ${h?"border-gray-300 focus:border-teal-500 focus:ring-teal-500":"border-gray-200 bg-gray-50"}`}),f.lastName&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.lastName})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:g.email,disabled:!0,className:"cursor-not-allowed rounded-md border border-gray-200 bg-gray-50 px-3 py-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:g.phone,onChange:u,disabled:!h,className:`rounded-md border px-3 py-2 ${h?"border-gray-300 focus:border-teal-500 focus:ring-teal-500":"border-gray-200 bg-gray-50"}`})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dob",value:g.dob,onChange:u,disabled:!h,className:`rounded-md border px-3 py-2 ${h?"border-gray-300 focus:border-teal-500 focus:ring-teal-500":"border-gray-200 bg-gray-50"}`}),f.dob&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.dob})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{name:"gender",value:g.gender,onChange:u,disabled:!h,className:`rounded-md border px-3 py-2 ${h?"border-gray-300 focus:border-teal-500 focus:ring-teal-500":"border-gray-200 bg-gray-50"}`,children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),f.gender&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.gender})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Two Factor Authentication"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",onClick:()=>{h&&j(s=>({...s,twoFactorEnabled:!s.twoFactorEnabled}))},disabled:!h,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none ${g.twoFactorEnabled?"bg-teal-600":"bg-gray-200"} ${h?"cursor-pointer":"cursor-not-allowed opacity-50"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${g.twoFactorEnabled?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:g.twoFactorEnabled?"Enabled":"Disabled"})]})]}),e.jsx("div",{}),e.jsxs("div",{className:"col-span-full space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Addresses"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[g.addresses.map((s,l)=>e.jsxs("div",{className:"relative rounded-lg border border-gray-200 p-5 shadow-sm transition-all hover:shadow-md",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full ${s.addressType==="home"?"bg-teal-100 text-teal-600":s.addressType==="work"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:s.addressType==="home"?"ðŸ ":s.addressType==="work"?"ðŸ¢":"ðŸ“"}),e.jsxs("h4",{className:"ml-3 font-medium text-gray-900 capitalize",children:[s.addressType," Address"]})]}),s.isDefault&&e.jsx("span",{className:"rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-800",children:"Default"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Building/Flat"}),h?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.building,onChange:p=>E(l,"building",p.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),f.addresses?.[l]?.building&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.addresses[l].building})]}):e.jsx("span",{className:"text-sm text-gray-900",children:s.building||"Not specified"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Street"}),h?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.street,onChange:p=>E(l,"street",p.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),f.addresses?.[l]?.street&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.addresses[l].building})]}):e.jsx("span",{className:"text-sm text-gray-900",children:s.street||"Not specified"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"City"}),h?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.city,onChange:p=>E(l,"city",p.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),f.addresses?.[l]?.city&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.addresses[l].city})]}):e.jsx("span",{className:"text-sm text-gray-900",children:s.city||"Not specified"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"State"}),h?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.state,onChange:p=>E(l,"state",p.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),f.addresses?.[l]?.state&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.addresses[l].state})]}):e.jsx("span",{className:"text-sm text-gray-900",children:s.state||"Not specified"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Postal Code"}),h?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.postalCode,onChange:p=>E(l,"postalCode",p.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),f.addresses?.[l]?.postalCode&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.addresses[l].postalCode})]}):e.jsx("span",{className:"text-sm text-gray-900",children:s.postalCode||"Not specified"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Country"}),h?e.jsx("input",{type:"text",value:s.country,onChange:p=>E(l,"country",p.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}):e.jsx("span",{className:"text-sm text-gray-900",children:s.country||"Not specified"})]})]})]}),h&&e.jsxs("div",{className:"mt-4 flex justify-end space-x-2 border-t border-gray-100 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>M(l),disabled:s.isDefault,className:"rounded-md bg-teal-50 px-3 py-1.5 text-xs font-medium text-teal-700 hover:bg-teal-100 disabled:cursor-not-allowed disabled:opacity-50",children:s.isDefault?"Default":"Set Default"}),e.jsx("button",{type:"button",onClick:()=>B(l),className:"rounded-md bg-red-50 px-3 py-1.5 text-xs font-medium text-red-700 hover:bg-red-100",children:"Remove"})]})]},l)),h&&e.jsx("div",{className:"flex",children:g.addresses.length===0?e.jsxs("div",{className:"flex w-full flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-8 text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gray-100",children:e.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("p",{className:"mb-2 text-sm font-medium text-gray-900",children:"No addresses yet"}),e.jsx("p",{className:"mb-4 text-xs text-gray-500",children:"Add your first address to get started"}),e.jsx("button",{type:"button",onClick:()=>N(!0),className:"rounded-md bg-teal-600 px-4 py-2 text-sm font-medium text-white hover:bg-teal-700",children:"Add Address"})]}):e.jsxs("div",{onClick:()=>N(!0),className:"flex h-full w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-6 text-center transition-colors hover:border-teal-400 hover:bg-teal-50",children:[e.jsx("div",{className:"mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-teal-100",children:e.jsx("svg",{className:"h-6 w-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Add another address"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to add"})]})})]}),S&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Address"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address Type"}),e.jsxs("select",{value:x.addressType,onChange:s=>C(l=>({...l,addressType:s.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",children:[e.jsx("option",{value:"home",children:"Home"}),e.jsx("option",{value:"work",children:"Work"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Building/Flat"}),e.jsx("input",{type:"text",value:x.building,onChange:s=>C(l=>({...l,building:s.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",placeholder:"123 Main St"})]}),e.jsx(me,{onPincodeSelect:_,currentPincode:x.postalCode}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("input",{type:"text",value:x.city,onChange:s=>C(l=>({...l,city:s.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",placeholder:"New York"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),e.jsx("input",{type:"text",value:x.state,onChange:s=>C(l=>({...l,state:s.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",placeholder:"NY"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Area Name"}),e.jsx("input",{type:"text",value:x.street,onChange:s=>C(l=>({...l,street:s.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",placeholder:"123 Main St"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),e.jsx("input",{value:x.country||"India",onChange:s=>C(l=>({...l,country:s.target.value})),disabled:!0,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"defaultAddress",checked:x.isDefault,onChange:s=>C(l=>({...l,isDefault:s.target.checked})),className:"h-4 w-4 rounded border-gray-300 text-teal-600 focus:ring-teal-500"}),e.jsx("label",{htmlFor:"defaultAddress",className:"ml-2 block text-sm text-gray-900",children:"Set as default address"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:J,className:"rounded-md bg-teal-600 px-4 py-2 text-sm font-medium text-white hover:bg-teal-700",children:"Add Address"})]})]})})]})]}),h&&e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:I,className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r==="updating",className:"flex items-center justify-center rounded-md border border-transparent bg-[#0b8263] px-4 py-2 text-sm font-medium text-white hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none disabled:opacity-70",children:r==="updating"?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})},he=d=>{const a=d.replace(/\D/g,"");if(a.length!==12)return!1;const r=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],o=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]];let m=0;const i=a.split("").reverse().join("");for(let y=0;y<i.length;y++)m=r[m][o[y%8][parseInt(i[y])]];return m===0},G=d=>/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(d.toUpperCase()),ge=d=>/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(d.toUpperCase()),H=({status:d})=>{const a={pending:{title:"KYC Verification Required",description:"Please complete your KYC verification to continue using our services.",icon:"â³",color:"text-yellow-600 bg-yellow-50 border-yellow-200"},requested:{title:"KYC Under Review",description:"Your KYC submission is being reviewed. You'll be notified once verified.",icon:"ðŸ“‹",color:"text-blue-600 bg-blue-50 border-blue-200"},verified:{title:"KYC Verified",description:"Your KYC has been successfully verified. You can now access all features.",icon:"âœ…",color:"text-green-600 bg-green-50 border-green-200"},rejected:{title:"KYC Rejected",description:"Your KYC submission was rejected. Please review and resubmit.",icon:"âŒ",color:"text-red-600 bg-red-50 border-red-200"}},r=a[d]||a.pending;return e.jsx("div",{className:`rounded-xl border-2 ${r.color} mb-8 p-6`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl",children:r.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:r.title}),e.jsx("p",{className:"mt-1 text-sm",children:r.description})]})]})})},T=({label:d,value:a,type:r="text"})=>a?e.jsxs("div",{className:"mb-4",children:[e.jsx("dt",{className:"mb-1 text-sm font-medium text-gray-500",children:d}),e.jsx("dd",{className:"text-gray-900",children:r==="file"?e.jsxs("a",{href:`https://api.sooquick.com${a}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-teal-600 hover:text-teal-800 hover:underline",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"View Document"]}):a})]}):null,U=({label:d,documentType:a,accept:r,file:o,onFileUpload:m,onRemoveFile:i,required:y=!1,disabled:t=!1,isDeleting:w=!1,isAgreement:k=!1,onDownloadAgreement:D})=>{const F=b.useRef(null),[P,g]=b.useState(null),[j,h]=b.useState({isLoading:!1,hasDownloaded:!1,error:null}),A=()=>{t||F.current?.click()},S=u=>u?u.split("/").pop().replace(/^\d+-/,""):"",N=o&&typeof o=="object"&&(o instanceof File||o.name&&o.size),x=N?o.name:typeof o=="string"?S(o):"";b.useEffect(()=>{if(N){const u=URL.createObjectURL(o);return g(u),()=>URL.revokeObjectURL(u)}else g(typeof o=="string"?`https://api.sooquick.com${o}`:null)},[o,N]);const C=x&&/\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(x),f=x&&/\.pdf$/i.test(x),n=async()=>{if(D){h(u=>({...u,isLoading:!0,error:null}));try{await D(),h(u=>({...u,isLoading:!1,hasDownloaded:!0}))}catch{h(c=>({...c,isLoading:!1,error:"Failed to download agreement. Please try again."}))}}};return e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:[d," ",y&&e.jsx("span",{className:"text-red-500",children:"*"}),k&&e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Download, sign, and re-upload)"})]}),k&&!o&&e.jsxs("div",{className:"mb-4 rounded-lg border border-blue-200 bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-blue-100",children:e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:"1"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Download Agreement Document"}),e.jsx("p",{className:"mt-1 text-xs text-blue-700",children:"Click below to download the agreement. Read carefully, sign, then upload the signed copy."})]}),j.error&&e.jsx("p",{className:"text-xs text-red-600",children:j.error})]}),e.jsx("button",{type:"button",onClick:n,disabled:t||j.isLoading,className:`mt-2 flex items-center gap-2 rounded-md px-3 py-1.5 text-xs font-medium transition-colors ${j.isLoading?"cursor-not-allowed bg-blue-400 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:j.isLoading?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border border-white border-t-transparent"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Agreement PDF"]})})]})]}),j.hasDownloaded&&e.jsxs("div",{className:"mt-3 flex items-start gap-3 border-t border-blue-100 pt-3",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-green-100",children:e.jsx("span",{className:"text-sm font-semibold text-green-600",children:"2"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Upload Signed Agreement"}),e.jsx("p",{className:"mt-1 text-xs text-green-700",children:"Now upload the signed agreement using the upload area below."})]}),e.jsx("button",{type:"button",onClick:n,className:"text-xs text-blue-600 hover:text-blue-800",children:"Download again?"})]})})]})]}),o?e.jsxs("div",{className:"relative rounded-lg border bg-gray-50 p-4 transition-all hover:bg-gray-100",children:[k&&e.jsx("div",{className:"absolute -top-2 left-4",children:e.jsx("span",{className:"rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-800",children:"âœ“ Signed Agreement Uploaded"})}),w&&e.jsx("div",{className:"bg-opacity-50 absolute inset-0 z-10 flex items-center justify-center rounded-lg bg-black",children:e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),e.jsx("span",{className:"text-sm",children:"Deleting..."})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[C&&P?e.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-md border",children:e.jsx("img",{src:P,alt:"Preview",className:"h-full w-full object-cover"})}):f?e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-md bg-red-100",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}):e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-md bg-gray-200",children:e.jsx("svg",{className:"h-8 w-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"max-w-xs truncate text-sm font-medium text-gray-900",children:x.slice(0,4)||"Uploaded file"}),N&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Size: ",Math.round(o.size/1024)," KB"]})]})]}),!t&&e.jsx("button",{type:"button",className:"rounded-full p-2 text-red-500 transition-colors hover:bg-red-50 hover:text-red-700",onClick:()=>i(a,o),disabled:w||t,children:w?e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-red-500 border-t-transparent"}):e.jsx(de,{className:"h-5 w-5"})})]})]}):e.jsxs("div",{className:`cursor-pointer rounded-lg border-2 border-dashed border-gray-300 p-6 text-center transition-all ${t?"cursor-not-allowed opacity-50":"hover:border-teal-400 hover:bg-teal-50"}`,onClick:A,children:[e.jsx("input",{type:"file",ref:F,accept:r,onChange:u=>m(u,a),className:"hidden",disabled:t}),k&&j.hasDownloaded&&e.jsxs("div",{className:"mb-4 flex items-center justify-center gap-2 rounded-md bg-teal-50 p-2",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-teal-100",children:e.jsx("svg",{className:"h-3 w-3 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-sm text-teal-800",children:"Now upload your signed agreement"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-teal-100",children:e.jsx("svg",{className:"h-6 w-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:k&&j.hasDownloaded?"Upload signed agreement":t?"Document uploaded":`Click to upload ${d.toLowerCase()}`}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:k?"Signed PDF, JPG, or PNG":r==="*"?"Any file type":`Formats: ${r}`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:t?"Document uploaded":`Click to upload ${d.toLowerCase()}`}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:r==="*"?"Any file type":`Formats: ${r}`})]}),!t&&e.jsx("button",{type:"button",className:"rounded-md bg-teal-600 px-3 py-1.5 text-xs text-white transition-colors hover:bg-teal-700",children:k&&j.hasDownloaded?"Upload Signed Copy":"Browse Files"})]})]})]})},pe=({formData:d,onChange:a,errors:r,disabled:o})=>e.jsxs("div",{className:"font-mont space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Aadhaar Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"aadhaarNumber",value:d.aadhaarNumber||"",onChange:m=>{const i=m.target.value.replace(/\D/g,"").slice(0,12);a(m.target.name,i)},className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${r.aadhaarNumber?"border-red-500":"border-gray-300"}`,placeholder:"Enter 12-digit Aadhaar number",disabled:o,required:!0}),r.aadhaarNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.aadhaarNumber})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["PAN Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"panNumber",value:d.panNumber||"",onChange:m=>{const i=m.target.value.toUpperCase();a(m.target.name,i)},className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${r.panNumber?"border-red-500":"border-gray-300"}`,placeholder:"ABCDE1234F",disabled:o,required:!0}),r.panNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.panNumber})]})]}),be=({formData:d,onChange:a,errors:r,disabled:o})=>e.jsxs("div",{className:"font-mont space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"companyName",value:d.companyName||"",onChange:m=>a(m.target.name,m.target.value),className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${r.companyName?"border-red-500":"border-gray-300"}`,placeholder:"Enter company name",disabled:o,required:!0}),r.companyName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.companyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Landline Number"}),e.jsx("input",{type:"tel",name:"landlineNumber",value:d.landlineNumber||"",onChange:m=>a(m.target.name,m.target.value),className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${r.landlineNumber?"border-red-500":"border-gray-300"}`,placeholder:"+91-XX-XXXXXXX",disabled:o}),r.landlineNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.landlineNumber})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["PAN Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"panNumber",value:d.panNumber||"",onChange:m=>{const i=m.target.value.toUpperCase();a(m.target.name,i)},className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${r.panNumber?"border-red-500":"border-gray-300"}`,placeholder:"ABCDE1234F",disabled:o,required:!0}),r.panNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.panNumber})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["GST Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"gstNumber",value:d.gstNumber||"",onChange:m=>{const i=m.target.value.toUpperCase();a(m.target.name,i)},className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${r.gstNumber?"border-red-500":"border-gray-300"}`,placeholder:"22ABCDE1234F1Z5",disabled:o,required:!0}),r.gstNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.gstNumber})]})]})]}),fe=()=>{const d=R(),{kycData:a,loading:r,error:o,success:m,kycStatus:i,deleteLoading:y}=z(n=>n.kyc),[t,w]=b.useState({businessType:"company",companyName:"",landlineNumber:"",panNumber:"",gstNumber:"",aadhaarNumber:""}),[k,D]=b.useState({}),[F,P]=b.useState({}),[g,j]=b.useState(null);b.useEffect(()=>{d(Y())},[d]),b.useEffect(()=>{a&&w(n=>({...n,...a}))},[a]);const h=(n,u)=>{w(c=>({...c,[n]:u})),k[n]&&D(c=>({...c,[n]:""})),d(O({[n]:u}))},A=n=>{w(u=>({...u,businessType:n,...n==="individual"&&{gstNumber:"",companyName:""}})),d(le(n)),d(O({businessType:n}))},S=(n,u)=>{const c=n.target.files[0];c&&d(ne({documentType:u,file:c}))},N=async(n,u)=>{j(n);try{u&&typeof u=="string"?(await K.deleteKycFile({documentType:n,documentPath:u}),d(W({documentType:n})),q.success("Document deleted successfully"),d(Y())):d(W({documentType:n}))}catch(c){console.error("Failed to delete document:",c),q.error("Failed to delete document")}finally{j(null)}},x=()=>{const n={};return t.businessType==="individual"?(t.aadhaarNumber?he(t.aadhaarNumber)||(n.aadhaarNumber="Enter valid 12-digit Aadhaar number"):n.aadhaarNumber="Aadhaar number is required",t.panNumber?G(t.panNumber)||(n.panNumber="Enter valid PAN number"):n.panNumber="PAN number is required"):(t.companyName?.trim()||(n.companyName="Company name is required"),t.panNumber?G(t.panNumber)||(n.panNumber="Enter valid PAN number"):n.panNumber="PAN number is required",t.gstNumber?ge(t.gstNumber)||(n.gstNumber="Enter valid GST number"):n.gstNumber="GST number is required"),D(n),Object.keys(n).length===0},C=n=>{n.preventDefault(),x()&&d(re())},f=async()=>{try{const n=await K.getAgreement(),u=new Blob([n.data],{type:"application/pdf"}),c=window.URL.createObjectURL(u),v=document.createElement("a");v.href=c,v.download="Terms-and-Agreement.pdf",document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(c),q.success("Agreement downloaded successfully")}catch(n){console.error("Failed to download agreement:",n),q.error("Failed to download agreement. Please try again.")}};return i&&i!=="pending"&&i!=="rejected"?e.jsx("div",{className:"font-mont min-h-screen bg-gray-50 px-4 py-8",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"KYC Verification"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"View your KYC verification details"})]}),e.jsx(H,{status:i}),i==="rejected"&&a?.kycRejectionMessage&&e.jsxs("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4",children:[e.jsx("p",{className:"font-medium text-red-800",children:"Reason for rejection"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:a.kycRejectionMessage})]}),e.jsxs("div",{className:"mb-8 rounded-xl bg-white p-6 shadow-lg",children:[e.jsxs("div",{className:"mb-6 border-b pb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Business Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Your business details and documents"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-700",children:"Profile Details"}),e.jsxs("dl",{className:"space-y-4",children:[e.jsx(T,{label:"Business Type",value:t.businessType==="company"?"Company":"Individual"}),t.businessType==="company"&&e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"Company Name",value:t.companyName}),e.jsx(T,{label:"Landline Number",value:t.landlineNumber}),e.jsx(T,{label:"GST Number",value:t.gstNumber})]}),t.businessType==="individual"&&e.jsx(T,{label:"Aadhaar Number",value:t.aadhaarNumber}),e.jsx(T,{label:"PAN Number",value:t.panNumber})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-700",children:"Documents"}),e.jsxs("dl",{className:"space-y-4",children:[e.jsx(T,{label:"PAN Card",value:a.documents?.panCard,type:"file"}),e.jsx(T,{label:"Cancelled Cheque",value:a.documents?.cancelledCheque,type:"file"}),e.jsx(T,{label:"Agreement",value:a.documents?.agreement,type:"file"}),t.businessType==="company"&&e.jsxs(e.Fragment,{children:[e.jsx(T,{label:"GST Certificate",value:a.documents?.gstCertificate,type:"file"}),e.jsx(T,{label:"CIN Certificate",value:a.documents?.cinCertificate,type:"file"})]}),t.businessType==="individual"&&e.jsx(T,{label:"Aadhaar Card",value:a.documents?.aadhaarCard,type:"file"})]})]})]}),i==="rejected"&&e.jsx("div",{className:"mt-8 border-t pt-6",children:e.jsx("button",{onClick:()=>d(Y()),className:"rounded-lg bg-teal-600 px-6 py-3 font-medium text-white transition-colors hover:bg-teal-700",children:"Update and Resubmit KYC"})})]})]})}):e.jsx("div",{className:"font-mont min-h-screen bg-gray-50 px-4 py-8",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Complete KYC Verification"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Verify your identity to access all features"})]}),e.jsx(H,{status:i}),e.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-lg",children:[m&&e.jsx("div",{className:"mb-6 rounded-lg border border-green-200 bg-green-50 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"KYC submitted successfully!"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your documents are under review."})]})]})}),o&&e.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4",children:e.jsx("p",{className:"text-red-700",children:o})}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"mb-4 block text-sm font-medium text-gray-700",children:["Select Business Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("button",{type:"button",onClick:()=>A("company"),className:`rounded-xl border-2 p-5 text-left transition-all ${t.businessType==="company"?"border-teal-500 bg-teal-50":"border-gray-200 hover:border-gray-300"}`,disabled:i==="requested",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex h-5 w-5 items-center justify-center rounded-full border ${t.businessType==="company"?"border-teal-500 bg-teal-500":"border-gray-300"}`,children:t.businessType==="company"&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Company"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"GST and business documents required"})]})]})}),e.jsx("button",{type:"button",onClick:()=>A("individual"),className:`rounded-xl border-2 p-5 text-left transition-all ${t.businessType==="individual"?"border-teal-500 bg-teal-50":"border-gray-200 hover:border-gray-300"}`,disabled:i==="requested",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex h-5 w-5 items-center justify-center rounded-full border ${t.businessType==="individual"?"border-teal-500 bg-teal-500":"border-gray-300"}`,children:t.businessType==="individual"&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Individual"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"PAN and cancelled cheque only"})]})]})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-6 text-lg font-semibold text-gray-800",children:t.businessType==="company"?"Company Details":"Personal Details"}),t.businessType==="company"?e.jsx(be,{formData:t,onChange:h,errors:k,disabled:i==="requested"}):e.jsx(pe,{formData:t,onChange:h,errors:k,disabled:i==="requested"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mb-6 border-b pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Required Documents"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Upload clear photos or scanned copies"})]}),e.jsxs("div",{className:"flex flex-col gap-5 md:flex-row",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsx(U,{label:"PAN Card",documentType:"panCard",accept:"image/*,.pdf",file:a.documents?.panCard,onFileUpload:S,onRemoveFile:()=>N("panCard",a.documents?.panCard),required:!0,disabled:i==="requested"}),t.businessType==="individual"&&e.jsx(U,{label:"Aadhaar Card",documentType:"aadhaarCard",accept:"image/*,.pdf",file:a.documents?.aadhaarCard,onFileUpload:S,onRemoveFile:()=>N("aadhaarCard",a.documents?.aadhaarCard),required:!0,disabled:i==="requested"}),t.businessType==="company"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{label:"GST Certificate",documentType:"gstCertificate",accept:"image/*,.pdf",file:a.documents?.gstCertificate,onFileUpload:S,onRemoveFile:()=>N("gstCertificate",a.documents?.gstCertificate),required:!0,disabled:i==="requested"}),e.jsx(U,{label:"CIN Certificate",documentType:"cinCertificate",accept:"image/*,.pdf",file:a.documents?.cinCertificate,onFileUpload:S,onRemoveFile:()=>N("cinCertificate",a.documents?.cinCertificate),required:!0,disabled:i==="requested"})]}),e.jsx(U,{label:"Cancelled Cheque / Bank Statement",documentType:"cancelledCheque",accept:"image/*,.pdf",file:a.documents?.cancelledCheque,onFileUpload:S,onRemoveFile:()=>N("cancelledCheque",a.documents?.cancelledCheque),required:!0,disabled:i==="requested"})]}),e.jsx(U,{label:"Terms & Agreement",documentType:"agreement",accept:".pdf,.jpg,.jpeg,.png",file:a.documents?.agreement,onFileUpload:S,onRemoveFile:()=>N("agreement",a.documents?.agreement),required:!0,disabled:i==="requested",isAgreement:!0,onDownloadAgreement:f})]})]}),i!=="requested"&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("button",{type:"submit",disabled:r||i==="requested",className:`w-full rounded-lg px-4 py-3 font-medium text-white transition-colors ${r?"cursor-not-allowed bg-gray-400":"bg-teal-600 hover:bg-teal-700"}`,children:r?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Submitting..."]}):"Submit KYC Verification"}),e.jsx("p",{className:"mt-3 text-center text-xs text-gray-500",children:"By submitting, you agree to our terms and confirm the information is accurate"})]})]})]})]})})},ke=()=>{R();const d=Z(),a=X(),r=new URLSearchParams(d.search),o=r.get("tab")||"profile";return b.useEffect(()=>{r.get("tab")||a("?tab=profile",{replace:!0})},[]),e.jsxs(oe,{children:[e.jsx(ce,{}),o==="kyc"&&e.jsx(fe,{}),o==="profile"&&e.jsx(xe,{})]})};export{ke as default};
