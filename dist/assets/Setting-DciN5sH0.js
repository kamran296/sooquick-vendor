import{c as I,u as H,h as X,j as e,i as _,a as p,k as Q,d as z,y as E,l as ee,m as se,n as te,o as Y,p as ae,q as re,t as K,b as le,v as O,w as ne}from"./index-jiLBgY-x.js";import{x as W,y as de}from"./index-NmB-QN9r.js";import{a as ie}from"./index-B0r-wx_s.js";import{U as oe}from"./UserLayout-CWIJ85M-.js";import"./iconBase-BrWCdWEL.js";const ce=()=>{const d=I(),r=H(),n=X(),c=new URLSearchParams(n.search).get("tab")||"profile",i=[{id:"profile",name:"Profile"},{id:"kyc",name:"KYC"}],f=t=>{r(`?tab=${t}`),d(_(t==="kyc"?1:0))};return e.jsx("div",{className:"sticky top-0 z-10 flex w-full items-center justify-center overflow-y-hidden py-2 md:py-2",children:e.jsx("div",{className:"tabs flex items-center justify-center gap-2 rounded-full bg-gray-200 px-4 py-2 md:gap-2",children:i.map(t=>e.jsx("div",{className:`cursor-pointer rounded-full px-4 py-1 transition-colors ${c===t.id?"bg-[#0b8263] text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,onClick:()=>f(t.id),children:t.name},t.id))})})},me=({onPincodeSelect:d,currentPincode:r=""})=>{const[n,o]=p.useState(!1),[c,i]=p.useState([]),[f,t]=p.useState(null),[j,F]=p.useState(r),[C,k]=p.useState(!1),[T,u]=p.useState(null),N=async x=>{k(!0),u(null);try{const a=await(await Q(`https://api.postalpincode.in/pincode/${x}`)).data;if(a[0].Status==="Success"&&a[0].PostOffice){const v=a[0].PostOffice.map(y=>({pincode:y.Pincode,areaName:y.Name,district:y.District,state:y.State,country:"India"}));i(v),v.length===1&&t(v[0])}else u("No data found for this pincode"),i([])}catch(w){u("Failed to fetch pincode data"),console.error("API Error:",w)}finally{k(!1)}},m=x=>{x.preventDefault(),j&&j.length===6?N(j):u("Please enter a valid 6-digit pincode")},A=x=>{t(x)},D=()=>{f&&(d&&d(f),b())},b=()=>{o(!1),i([]),t(null),u(null)};return e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Postal Code"}),e.jsx("div",{className:"flex",children:e.jsx("button",{type:"button",onClick:()=>o(!0),className:"ml-2 inline-flex items-center rounded-md border border-transparent bg-teal-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none",children:"Add Pincode"})}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Find Your Area"}),e.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enter 6-digit Pincode"}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsx("input",{type:"text",value:j,onChange:x=>F(x.target.value.replace(/\D/g,"").slice(0,6)),className:"block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",placeholder:"e.g., 110001"}),e.jsx("button",{type:"button",onClick:m,className:"ml-2 inline-flex items-center rounded-md border border-transparent bg-teal-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none",children:"Search"})]})]}),C&&e.jsx("div",{className:"my-4 text-center",children:e.jsx("p",{children:"Loading pincode data..."})}),T&&e.jsx("div",{className:"my-4 rounded-md bg-red-50 p-4",children:e.jsx("p",{className:"text-red-800",children:T})}),c.length>0&&!C&&e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsx("h4",{className:"text-md mb-2 font-medium text-gray-700",children:"Select your area:"}),e.jsx("div",{className:"max-h-60 overflow-y-auto rounded-md border p-2",children:c.map((x,w)=>e.jsxs("div",{className:`mb-2 cursor-pointer rounded-md p-3 ${f?.areaName===x.areaName?"border border-teal-200 bg-teal-50":"hover:bg-gray-50"}`,onClick:()=>A(x),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",checked:f?.areaName===x.areaName,onChange:()=>A(x),className:"h-4 w-4 text-teal-600 focus:ring-teal-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:x.areaName})]}),e.jsxs("div",{className:"mt-1 ml-6 text-xs text-gray-500",children:[x.district,", ",x.state]})]},w))}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:D,disabled:!f,className:"w-full rounded-md bg-teal-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-400",children:"Select Area"})})]})]})]})})]})},ue=({size:d="xl"})=>{const r=I(),n=p.useRef(null),[o,c]=p.useState(!1),[i,f]=p.useState(null),[t,j]=p.useState(!1),{user:F}=z(g=>g.user),{firstName:C,lastName:k,profileImage:T}=F||{},u={sm:"w-20 h-20",md:"w-32 h-32",lg:"w-40 h-40",xl:"w-48 h-48"},N={sm:"text-xl",md:"text-2xl",lg:"text-3xl",xl:"text-4xl"},m=()=>T?T.startsWith("http")?T:`https://api.sooquick.com/${T.replace(/^\//,"")}`:null,A=g=>{if(!g)return;if(!["image/jpeg","image/png","image/webp"].includes(g.type)){E.error("Please select a valid image file (JPEG, PNG, WebP)");return}const B=5*1024*1024;if(g.size>B){E.error("Image size must be less than 5MB");return}const M=new FileReader;M.onload=R=>{f(R.target.result),D(g)},M.readAsDataURL(g)},D=async g=>{c(!0);try{const S=new FormData;S.append("image",g),await r(ee(S)).unwrap(),E.success("Profile picture updated successfully!")}catch(S){E.error(S||"Failed to upload image"),f(null)}finally{c(!1)}},b=g=>{g.preventDefault(),j(!1);const S=g.dataTransfer.files[0];S&&A(S)},x=g=>{g.preventDefault(),j(!0)},w=()=>{j(!1)},a=()=>{if(!C&&!k)return"U";const g=`${C||""} ${k||""}`.trim();return g?g.split(" ").map(S=>S[0]).join("").toUpperCase().slice(0,2):"U"},v=i||m(),y=i||m();return e.jsxs("div",{className:"group relative",children:[e.jsxs("div",{className:`${u[d]} relative cursor-pointer overflow-hidden rounded-full border-4 border-white bg-gradient-to-br from-teal-100 to-blue-100 shadow-lg transition-all duration-300 ${t?"scale-105 ring-4 ring-teal-300":"hover:scale-105"} ${o?"opacity-70":""}`,onClick:()=>!o&&n.current?.click(),onDrop:b,onDragOver:x,onDragLeave:w,children:[v?e.jsx("img",{src:y,alt:`${C||""} ${k||""}`.trim()||"Profile",className:"h-full w-full object-cover",onError:g=>{g.target.style.display="none"}}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("span",{className:`font-bold text-teal-600 ${N[d]}`,children:a()})}),o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-white"})}),!o&&e.jsx("div",{className:`absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition-opacity duration-300 group-hover:opacity-100 ${t?"opacity-100":""}`,children:e.jsxs("div",{className:"text-center text-white",children:[e.jsxs("svg",{className:"mx-auto mb-1 h-8 w-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("p",{className:"text-xs font-medium",children:t?"Drop to upload":"Click to upload"})]})})]}),e.jsx("button",{type:"button",onClick:()=>!o&&n.current?.click(),disabled:o,className:"absolute -right-2 -bottom-2 flex h-10 w-10 items-center justify-center rounded-full border-4 border-white bg-teal-500 text-white shadow-lg transition-all duration-200 hover:bg-teal-600 active:scale-95 disabled:cursor-not-allowed disabled:opacity-50",title:"Change profile picture",children:o?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-white"}):e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})})}),e.jsx("input",{type:"file",ref:n,className:"hidden",accept:"image/*",onChange:g=>{const S=g.target.files[0];S&&A(S),g.target.value=""}}),t&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:e.jsxs("div",{className:"max-w-md rounded-2xl bg-white p-8 text-center shadow-2xl",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-teal-100",children:e.jsx("svg",{className:"h-10 w-10 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsx("h3",{className:"mb-2 text-xl font-bold text-gray-800",children:"Drop your image"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Release to upload your profile picture"}),e.jsx("div",{className:"rounded-lg bg-gray-50 p-3 text-sm text-gray-500",children:"Supports: JPEG, PNG, WebP (Max 5MB)"})]})})]})},xe=()=>{const d=I(),{user:r,status:n,error:o}=z(s=>s.user),{firstName:c,lastName:i,email:f,phone:t,addresses:j,dob:F,gender:C,twoFactorEnabled:k,profileImage:T}=r||{},[u,N]=p.useState({firstName:"",lastName:"",email:"",phone:"",addresses:[],dob:"",gender:"",twoFactorEnabled:!1}),[m,A]=p.useState(!1),[D,b]=p.useState(!1),[x,w]=p.useState({addressType:"home",street:"",building:"",city:"",state:"",postalCode:"",country:"India",isDefault:!1}),[a,v]=p.useState({});p.useEffect(()=>{d(se())},[d]),p.useEffect(()=>{n==="succeeded"&&A(!1)},[n]),p.useEffect(()=>{r&&N({firstName:c||"",lastName:i||"",email:f||"",phone:t||"",addresses:j||[{building:"",street:"",city:"",state:"",postalCode:"",country:""}],dob:F||"",gender:C||"",twoFactorEnabled:k||!1})},[r,c,i,f,t,j,F,C,k]);const y=s=>{const{name:l,value:h}=s.target;N(L=>({...L,[l]:h}))},g=()=>{const s={};u.firstName.trim()||(s.firstName="First name is required"),u.lastName.trim()||(s.lastName="Last name is required"),u.dob||(s.dob="Please enter your DOB"),["Male","Female","Other"].includes(u.gender)||(s.gender="Please select a valid gender");const l={};return u.addresses.forEach((h,L)=>{const P={};h.building?.trim()||(P.building="Building/flat is required"),h.street?.trim()||(P.street="Street is required"),h.city?.trim()||(P.city="City is required"),h.state?.trim()||(P.state="State is required"),h.postalCode?.trim()||(P.postalCode="Postal code is required"),Object.keys(P).length>0&&(l[L]=P)}),Object.keys(l).length>0&&(s.addresses=l),s},S=async s=>{s.preventDefault();const l=g();if(Object.keys(l).length>0){v(l);return}v({});try{console.log(FormData,"formdata"),await d(te(u)).unwrap(),E.success("Profile updated successfully!"),A(!1)}catch(h){console.log(h),E.error(h.message||"Failed to update profile")}},B=()=>{N({firstName:c||"",lastName:i||"",email:f||"",phone:t||"",addresses:j||[{street:"",city:"",building:"",state:"",postalCode:"",country:""}],dob:F||"",gender:C||"",twoFactorEnabled:k||!1}),A(!1)};if(n==="loading"&&!r)return e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(W,{className:"animate-spin text-2xl text-teal-500"})});const M=s=>{const l=u.addresses[s],h=u.addresses.filter((L,P)=>P!==s);l.isDefault&&h.length>0&&(h[0].isDefault=!0),N(L=>({...L,addresses:h}))},R=s=>{const l=u.addresses.map((h,L)=>({...h,isDefault:L===s}));N(h=>({...h,addresses:l}))},Z=()=>{const s=u.addresses.map(l=>({...l,isDefault:x.isDefault?!1:l.isDefault}));s.push({...x,isDefault:u.addresses.length===0||x.isDefault}),N(l=>({...l,addresses:s})),w({addressType:"home",building:"",street:"",city:"",state:"",postalCode:"",country:"India",isDefault:!1}),b(!1)},q=(s,l,h)=>{N(L=>{const P=[...L.addresses];return P[s]={...P[s],[l]:h},{...L,addresses:P}})},J=s=>{w(l=>({...l,postalCode:s.pincode,city:s.district,state:s.state,street:s.areaName,country:s.country||"India"}))};return e.jsx("div",{className:"font-mont mx-auto max-w-md px-4 py-8 sm:max-w-lg sm:px-6 lg:max-w-6xl lg:px-8",children:e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow-xl",children:[e.jsx("div",{className:"mb-6 flex flex-col items-start justify-between gap-6 border-b pb-6 sm:flex-row sm:items-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 md:flex-row",children:[e.jsx(ue,{currentImage:`https://api.sooquick.com${T}`,userName:`${c} ${i}`,size:"xl"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[c," ",i]}),e.jsx("p",{className:"text-gray-600",children:f}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Click on the profile picture to upload a new one"})]})]})}),e.jsxs("div",{className:"mb-6 flex items-center justify-between border-b pb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"My Settings"}),e.jsxs("button",{type:"button",onClick:()=>A(s=>!s),className:`z-30 flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium ${m?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-green-100 text-green-700 hover:bg-green-200"} transition-colors`,children:[e.jsx(ie,{}),m?"Cancel":"Edit"]})]}),n==="failed"&&e.jsxs("div",{className:"rounded bg-red-100 p-4 text-red-700",children:["Error: ",o||"Failed to load user data"]}),e.jsxs("form",{onSubmit:S,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"First Name"}),e.jsx("input",{type:"text",name:"firstName",value:u.firstName,onChange:y,disabled:!m,className:`rounded-md border px-3 py-2 ${m?"border-gray-300 focus:border-teal-500 focus:ring-teal-500":"border-gray-200 bg-gray-50"}`}),a.firstName&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a.firstName})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",value:u.lastName,onChange:y,disabled:!m,className:`rounded-md border px-3 py-2 ${m?"border-gray-300 focus:border-teal-500 focus:ring-teal-500":"border-gray-200 bg-gray-50"}`}),a.lastName&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a.lastName})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:u.email,disabled:!0,className:"cursor-not-allowed rounded-md border border-gray-200 bg-gray-50 px-3 py-2"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:y,disabled:!m,className:`rounded-md border px-3 py-2 ${m?"border-gray-300 focus:border-teal-500 focus:ring-teal-500":"border-gray-200 bg-gray-50"}`})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dob",value:u.dob,onChange:y,disabled:!m,className:`rounded-md border px-3 py-2 ${m?"border-gray-300 focus:border-teal-500 focus:ring-teal-500":"border-gray-200 bg-gray-50"}`}),a.dob&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a.dob})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{name:"gender",value:u.gender,onChange:y,disabled:!m,className:`rounded-md border px-3 py-2 ${m?"border-gray-300 focus:border-teal-500 focus:ring-teal-500":"border-gray-200 bg-gray-50"}`,children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),a.gender&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a.gender})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Two Factor Authentication"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",onClick:()=>{m&&N(s=>({...s,twoFactorEnabled:!s.twoFactorEnabled}))},disabled:!m,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none ${u.twoFactorEnabled?"bg-teal-600":"bg-gray-200"} ${m?"cursor-pointer":"cursor-not-allowed opacity-50"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u.twoFactorEnabled?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:u.twoFactorEnabled?"Enabled":"Disabled"})]})]}),e.jsx("div",{}),e.jsxs("div",{className:"col-span-full space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Addresses"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[u.addresses.map((s,l)=>e.jsxs("div",{className:"relative rounded-lg border border-gray-200 p-5 shadow-sm transition-all hover:shadow-md",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full ${s.addressType==="home"?"bg-teal-100 text-teal-600":s.addressType==="work"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:s.addressType==="home"?"ðŸ ":s.addressType==="work"?"ðŸ¢":"ðŸ“"}),e.jsxs("h4",{className:"ml-3 font-medium text-gray-900 capitalize",children:[s.addressType," Address"]})]}),s.isDefault&&e.jsx("span",{className:"rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-800",children:"Default"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Building/Flat"}),m?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.building,onChange:h=>q(l,"building",h.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),a.addresses?.[l]?.building&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a.addresses[l].building})]}):e.jsx("span",{className:"text-sm text-gray-900",children:s.building||"Not specified"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Street"}),m?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.street,onChange:h=>q(l,"street",h.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),a.addresses?.[l]?.street&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a.addresses[l].building})]}):e.jsx("span",{className:"text-sm text-gray-900",children:s.street||"Not specified"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"City"}),m?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.city,onChange:h=>q(l,"city",h.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),a.addresses?.[l]?.city&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a.addresses[l].city})]}):e.jsx("span",{className:"text-sm text-gray-900",children:s.city||"Not specified"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"State"}),m?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.state,onChange:h=>q(l,"state",h.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),a.addresses?.[l]?.state&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a.addresses[l].state})]}):e.jsx("span",{className:"text-sm text-gray-900",children:s.state||"Not specified"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Postal Code"}),m?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:s.postalCode,onChange:h=>q(l,"postalCode",h.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}),a.addresses?.[l]?.postalCode&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:a.addresses[l].postalCode})]}):e.jsx("span",{className:"text-sm text-gray-900",children:s.postalCode||"Not specified"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Country"}),m?e.jsx("input",{type:"text",value:s.country,onChange:h=>q(l,"country",h.target.value),className:"mt-1 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500"}):e.jsx("span",{className:"text-sm text-gray-900",children:s.country||"Not specified"})]})]})]}),m&&e.jsxs("div",{className:"mt-4 flex justify-end space-x-2 border-t border-gray-100 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>R(l),disabled:s.isDefault,className:"rounded-md bg-teal-50 px-3 py-1.5 text-xs font-medium text-teal-700 hover:bg-teal-100 disabled:cursor-not-allowed disabled:opacity-50",children:s.isDefault?"Default":"Set Default"}),e.jsx("button",{type:"button",onClick:()=>M(l),className:"rounded-md bg-red-50 px-3 py-1.5 text-xs font-medium text-red-700 hover:bg-red-100",children:"Remove"})]})]},l)),m&&e.jsx("div",{className:"flex",children:u.addresses.length===0?e.jsxs("div",{className:"flex w-full flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-8 text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gray-100",children:e.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("p",{className:"mb-2 text-sm font-medium text-gray-900",children:"No addresses yet"}),e.jsx("p",{className:"mb-4 text-xs text-gray-500",children:"Add your first address to get started"}),e.jsx("button",{type:"button",onClick:()=>b(!0),className:"rounded-md bg-teal-600 px-4 py-2 text-sm font-medium text-white hover:bg-teal-700",children:"Add Address"})]}):e.jsxs("div",{onClick:()=>b(!0),className:"flex h-full w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 p-6 text-center transition-colors hover:border-teal-400 hover:bg-teal-50",children:[e.jsx("div",{className:"mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-teal-100",children:e.jsx("svg",{className:"h-6 w-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Add another address"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Click to add"})]})})]}),D&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Address"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address Type"}),e.jsxs("select",{value:x.addressType,onChange:s=>w(l=>({...l,addressType:s.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",children:[e.jsx("option",{value:"home",children:"Home"}),e.jsx("option",{value:"work",children:"Work"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Building/Flat"}),e.jsx("input",{type:"text",value:x.building,onChange:s=>w(l=>({...l,building:s.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",placeholder:"123 Main St"})]}),e.jsx(me,{onPincodeSelect:J,currentPincode:x.postalCode}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("input",{type:"text",value:x.city,onChange:s=>w(l=>({...l,city:s.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",placeholder:"New York"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),e.jsx("input",{type:"text",value:x.state,onChange:s=>w(l=>({...l,state:s.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",placeholder:"NY"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Area Name"}),e.jsx("input",{type:"text",value:x.street,onChange:s=>w(l=>({...l,street:s.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none",placeholder:"123 Main St"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),e.jsx("input",{value:x.country||"India",onChange:s=>w(l=>({...l,country:s.target.value})),disabled:!0,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-teal-500 focus:ring-1 focus:ring-teal-500 focus:outline-none"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"defaultAddress",checked:x.isDefault,onChange:s=>w(l=>({...l,isDefault:s.target.checked})),className:"h-4 w-4 rounded border-gray-300 text-teal-600 focus:ring-teal-500"}),e.jsx("label",{htmlFor:"defaultAddress",className:"ml-2 block text-sm text-gray-900",children:"Set as default address"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:Z,className:"rounded-md bg-teal-600 px-4 py-2 text-sm font-medium text-white hover:bg-teal-700",children:"Add Address"})]})]})})]})]}),m&&e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:B,className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n==="updating",className:"flex items-center justify-center rounded-md border border-transparent bg-[#0b8263] px-4 py-2 text-sm font-medium text-white hover:bg-teal-700 focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:outline-none disabled:opacity-70",children:n==="updating"?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})},he=d=>{const r=d.replace(/\D/g,"");if(r.length!==12)return!1;const n=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],o=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]];let c=0;const i=r.split("").reverse().join("");for(let f=0;f<i.length;f++)c=n[c][o[f%8][parseInt(i[f])]];return c===0},V=d=>/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(d.toUpperCase()),pe=d=>/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(d.toUpperCase()),G=({status:d})=>{const r={pending:{title:"KYC Verification Required",description:"Please complete your KYC verification to continue using our services.",icon:"â³",color:"text-yellow-600 bg-yellow-50 border-yellow-200"},requested:{title:"KYC Under Review",description:"Your KYC submission is being reviewed. You'll be notified once verified.",icon:"ðŸ“‹",color:"text-blue-600 bg-blue-50 border-blue-200"},verified:{title:"KYC Verified",description:"Your KYC has been successfully verified. You can now access all features.",icon:"âœ…",color:"text-green-600 bg-green-50 border-green-200"},rejected:{title:"KYC Rejected",description:"Your KYC submission was rejected. Please review and resubmit.",icon:"âŒ",color:"text-red-600 bg-red-50 border-red-200"}},n=r[d]||r.pending;return e.jsx("div",{className:`rounded-xl border-2 ${n.color} mb-8 p-6`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl",children:n.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:n.title}),e.jsx("p",{className:"mt-1 text-sm",children:n.description})]})]})})},$=({label:d,value:r,type:n="text"})=>r?e.jsxs("div",{className:"mb-4",children:[e.jsx("dt",{className:"mb-1 text-sm font-medium text-gray-500",children:d}),e.jsx("dd",{className:"text-gray-900",children:n==="file"?e.jsxs("a",{href:`https://api.sooquick.com${r}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-teal-600 hover:text-teal-800 hover:underline",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"View Document"]}):r})]}):null,U=({label:d,documentType:r,accept:n,file:o,onFileUpload:c,onRemoveFile:i,required:f=!1,disabled:t=!1,isDeleting:j=!1})=>{const F=p.useRef(null),[C,k]=p.useState(null),T=()=>{t||F.current?.click()},u=b=>b?b.split("/").pop().replace(/^\d+-/,""):"",N=o&&typeof o=="object"&&(o instanceof File||o.name&&o.size),m=N?o.name:typeof o=="string"?u(o):"";p.useEffect(()=>{if(N){const b=URL.createObjectURL(o);return k(b),()=>URL.revokeObjectURL(b)}else k(typeof o=="string"?`https://api.sooquick.com${o}`:null)},[o,N]);const A=m&&/\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(m),D=m&&/\.pdf$/i.test(m);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:[d," ",f&&e.jsx("span",{className:"text-red-500",children:"*"})]}),o?e.jsxs("div",{className:"relative rounded-lg border bg-gray-50 p-4 transition-all hover:bg-gray-100",children:[j&&e.jsx("div",{className:"bg-opacity-50 absolute inset-0 z-10 flex items-center justify-center rounded-lg bg-black",children:e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),e.jsx("span",{className:"text-sm",children:"Deleting..."})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[A&&C?e.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-md border",children:e.jsx("img",{src:C,alt:"Preview",className:"h-full w-full object-cover"})}):D?e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-md bg-red-100",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}):e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-md bg-gray-200",children:e.jsx("svg",{className:"h-8 w-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"max-w-xs truncate text-sm font-medium text-gray-900",children:m||"Uploaded file"}),N&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Size: ",Math.round(o.size/1024)," KB"]})]})]}),!t&&e.jsx("button",{type:"button",className:"rounded-full p-2 text-red-500 transition-colors hover:bg-red-50 hover:text-red-700",onClick:()=>i(r,o),disabled:j||t,children:j?e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-red-500 border-t-transparent"}):e.jsx(de,{className:"h-5 w-5"})})]})]}):e.jsxs("div",{className:`cursor-pointer rounded-lg border-2 border-dashed border-gray-300 p-6 text-center transition-all ${t?"cursor-not-allowed opacity-50":"hover:border-teal-400 hover:bg-teal-50"}`,onClick:T,children:[e.jsx("input",{type:"file",ref:F,accept:n,onChange:b=>c(b,r),className:"hidden",disabled:t}),e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-teal-100",children:e.jsx("svg",{className:"h-6 w-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:t?"Document uploaded":`Click to upload ${d.toLowerCase()}`}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:n==="*"?"Any file type":`Formats: ${n}`})]}),!t&&e.jsx("button",{type:"button",className:"rounded-md bg-teal-600 px-3 py-1.5 text-xs text-white transition-colors hover:bg-teal-700",children:"Browse Files"})]})]})]})},ge=({formData:d,onChange:r,errors:n,disabled:o})=>e.jsxs("div",{className:"font-mont space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Aadhaar Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"aadhaarNumber",value:d.aadhaarNumber||"",onChange:c=>{const i=c.target.value.replace(/\D/g,"").slice(0,12);r(c.target.name,i)},className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${n.aadhaarNumber?"border-red-500":"border-gray-300"}`,placeholder:"Enter 12-digit Aadhaar number",disabled:o,required:!0}),n.aadhaarNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.aadhaarNumber})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["PAN Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"panNumber",value:d.panNumber||"",onChange:c=>{const i=c.target.value.toUpperCase();r(c.target.name,i)},className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${n.panNumber?"border-red-500":"border-gray-300"}`,placeholder:"ABCDE1234F",disabled:o,required:!0}),n.panNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.panNumber})]})]}),be=({formData:d,onChange:r,errors:n,disabled:o})=>e.jsxs("div",{className:"font-mont space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"companyName",value:d.companyName||"",onChange:c=>r(c.target.name,c.target.value),className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${n.companyName?"border-red-500":"border-gray-300"}`,placeholder:"Enter company name",disabled:o,required:!0}),n.companyName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.companyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Landline Number"}),e.jsx("input",{type:"tel",name:"landlineNumber",value:d.landlineNumber||"",onChange:c=>r(c.target.name,c.target.value),className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${n.landlineNumber?"border-red-500":"border-gray-300"}`,placeholder:"+91-XX-XXXXXXX",disabled:o}),n.landlineNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.landlineNumber})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["PAN Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"panNumber",value:d.panNumber||"",onChange:c=>{const i=c.target.value.toUpperCase();r(c.target.name,i)},className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${n.panNumber?"border-red-500":"border-gray-300"}`,placeholder:"ABCDE1234F",disabled:o,required:!0}),n.panNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.panNumber})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["GST Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"gstNumber",value:d.gstNumber||"",onChange:c=>{const i=c.target.value.toUpperCase();r(c.target.name,i)},className:`w-full rounded-lg border px-4 py-3 focus:ring-2 focus:ring-teal-500 focus:outline-none ${n.gstNumber?"border-red-500":"border-gray-300"}`,placeholder:"22ABCDE1234F1Z5",disabled:o,required:!0}),n.gstNumber&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.gstNumber})]})]})]}),fe=()=>{const d=I(),{kycData:r,loading:n,error:o,success:c,kycStatus:i,deleteLoading:f}=z(a=>a.kyc),[t,j]=p.useState({businessType:"company",companyName:"",landlineNumber:"",panNumber:"",gstNumber:"",aadhaarNumber:""}),[F,C]=p.useState({}),[k,T]=p.useState({}),[u,N]=p.useState(null);p.useEffect(()=>{d(Y())},[d]),p.useEffect(()=>{r&&j(a=>({...a,...r}))},[r]);const m=(a,v)=>{j(y=>({...y,[a]:v})),F[a]&&C(y=>({...y,[a]:""})),d(K({[a]:v}))},A=a=>{j(v=>({...v,businessType:a,...a==="individual"&&{gstNumber:"",companyName:""}})),d(re(a)),d(K({businessType:a}))},D=(a,v)=>{const y=a.target.files[0];y&&d(ne({documentType:v,file:y}))},b=async(a,v)=>{N(a);try{v&&typeof v=="string"?(await le.deleteKycFile({documentType:a,documentPath:v}),d(O({documentType:a})),toast.success("Document deleted successfully"),d(Y())):d(O({documentType:a}))}catch(y){console.error("Failed to delete document:",y),toast.error("Failed to delete document")}finally{N(null)}},x=()=>{const a={};return t.businessType==="individual"?(t.aadhaarNumber?he(t.aadhaarNumber)||(a.aadhaarNumber="Enter valid 12-digit Aadhaar number"):a.aadhaarNumber="Aadhaar number is required",t.panNumber?V(t.panNumber)||(a.panNumber="Enter valid PAN number"):a.panNumber="PAN number is required"):(t.companyName?.trim()||(a.companyName="Company name is required"),t.panNumber?V(t.panNumber)||(a.panNumber="Enter valid PAN number"):a.panNumber="PAN number is required",t.gstNumber?pe(t.gstNumber)||(a.gstNumber="Enter valid GST number"):a.gstNumber="GST number is required"),C(a),Object.keys(a).length===0},w=a=>{a.preventDefault(),x()&&d(ae())};return i&&i!=="pending"&&i!=="rejected"?e.jsx("div",{className:"font-mont min-h-screen bg-gray-50 px-4 py-8",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"KYC Verification"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"View your KYC verification details"})]}),e.jsx(G,{status:i}),i==="rejected"&&r?.kycRejectionMessage&&e.jsxs("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4",children:[e.jsx("p",{className:"font-medium text-red-800",children:"Reason for rejection"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:r.kycRejectionMessage})]}),e.jsxs("div",{className:"mb-8 rounded-xl bg-white p-6 shadow-lg",children:[e.jsxs("div",{className:"mb-6 border-b pb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Business Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Your business details and documents"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-700",children:"Profile Details"}),e.jsxs("dl",{className:"space-y-4",children:[e.jsx($,{label:"Business Type",value:t.businessType==="company"?"Company":"Individual"}),t.businessType==="company"&&e.jsxs(e.Fragment,{children:[e.jsx($,{label:"Company Name",value:t.companyName}),e.jsx($,{label:"Landline Number",value:t.landlineNumber}),e.jsx($,{label:"GST Number",value:t.gstNumber})]}),t.businessType==="individual"&&e.jsx($,{label:"Aadhaar Number",value:t.aadhaarNumber}),e.jsx($,{label:"PAN Number",value:t.panNumber})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-700",children:"Documents"}),e.jsxs("dl",{className:"space-y-4",children:[e.jsx($,{label:"PAN Card",value:r.documents?.panCard,type:"file"}),e.jsx($,{label:"Cancelled Cheque",value:r.documents?.cancelledCheque,type:"file"}),t.businessType==="company"&&e.jsxs(e.Fragment,{children:[e.jsx($,{label:"GST Certificate",value:r.documents?.gstCertificate,type:"file"}),e.jsx($,{label:"CIN Certificate",value:r.documents?.cinCertificate,type:"file"})]}),t.businessType==="individual"&&e.jsx($,{label:"Aadhaar Card",value:r.documents?.aadhaarCard,type:"file"})]})]})]}),i==="rejected"&&e.jsx("div",{className:"mt-8 border-t pt-6",children:e.jsx("button",{onClick:()=>d(Y()),className:"rounded-lg bg-teal-600 px-6 py-3 font-medium text-white transition-colors hover:bg-teal-700",children:"Update and Resubmit KYC"})})]})]})}):e.jsx("div",{className:"font-mont min-h-screen bg-gray-50 px-4 py-8",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Complete KYC Verification"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Verify your identity to access all features"})]}),e.jsx(G,{status:i}),e.jsxs("div",{className:"rounded-xl bg-white p-6 shadow-lg",children:[c&&e.jsx("div",{className:"mb-6 rounded-lg border border-green-200 bg-green-50 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"KYC submitted successfully!"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your documents are under review."})]})]})}),o&&e.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4",children:e.jsx("p",{className:"text-red-700",children:o})}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("label",{className:"mb-4 block text-sm font-medium text-gray-700",children:["Select Business Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("button",{type:"button",onClick:()=>A("company"),className:`rounded-xl border-2 p-5 text-left transition-all ${t.businessType==="company"?"border-teal-500 bg-teal-50":"border-gray-200 hover:border-gray-300"}`,disabled:i==="requested",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex h-5 w-5 items-center justify-center rounded-full border ${t.businessType==="company"?"border-teal-500 bg-teal-500":"border-gray-300"}`,children:t.businessType==="company"&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Company"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"GST and business documents required"})]})]})}),e.jsx("button",{type:"button",onClick:()=>A("individual"),className:`rounded-xl border-2 p-5 text-left transition-all ${t.businessType==="individual"?"border-teal-500 bg-teal-50":"border-gray-200 hover:border-gray-300"}`,disabled:i==="requested",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex h-5 w-5 items-center justify-center rounded-full border ${t.businessType==="individual"?"border-teal-500 bg-teal-500":"border-gray-300"}`,children:t.businessType==="individual"&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Individual"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"PAN and cancelled cheque only"})]})]})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-6 text-lg font-semibold text-gray-800",children:t.businessType==="company"?"Company Details":"Personal Details"}),t.businessType==="company"?e.jsx(be,{formData:t,onChange:m,errors:F,disabled:i==="requested"}):e.jsx(ge,{formData:t,onChange:m,errors:F,disabled:i==="requested"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mb-6 border-b pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Required Documents"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Upload clear photos or scanned copies"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsx(U,{label:"PAN Card",documentType:"panCard",accept:"image/*,.pdf",file:r.documents?.panCard,onFileUpload:D,onRemoveFile:()=>b("panCard",r.documents?.panCard),required:!0,disabled:i==="requested"}),t.businessType==="individual"&&e.jsx(U,{label:"Aadhaar Card",documentType:"aadhaarCard",accept:"image/*,.pdf",file:r.documents?.aadhaarCard,onFileUpload:D,onRemoveFile:()=>b("aadhaarCard",r.documents?.aadhaarCard),required:!0,disabled:i==="requested"}),t.businessType==="company"&&e.jsxs(e.Fragment,{children:[e.jsx(U,{label:"GST Certificate",documentType:"gstCertificate",accept:"image/*,.pdf",file:r.documents?.gstCertificate,onFileUpload:D,onRemoveFile:()=>b("gstCertificate",r.documents?.gstCertificate),required:!0,disabled:i==="requested"}),e.jsx(U,{label:"CIN Certificate",documentType:"cinCertificate",accept:"image/*,.pdf",file:r.documents?.cinCertificate,onFileUpload:D,onRemoveFile:()=>b("cinCertificate",r.documents?.cinCertificate),required:!0,disabled:i==="requested"})]}),e.jsx(U,{label:"Cancelled Cheque / Bank Statement",documentType:"cancelledCheque",accept:"image/*,.pdf",file:r.documents?.cancelledCheque,onFileUpload:D,onRemoveFile:()=>b("cancelledCheque",r.documents?.cancelledCheque),required:!0,disabled:i==="requested"})]})]}),i!=="requested"&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("button",{type:"submit",disabled:n||i==="requested",className:`w-full rounded-lg px-4 py-3 font-medium text-white transition-colors ${n?"cursor-not-allowed bg-gray-400":"bg-teal-600 hover:bg-teal-700"}`,children:n?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Submitting..."]}):"Submit KYC Verification"}),e.jsx("p",{className:"mt-3 text-center text-xs text-gray-500",children:"By submitting, you agree to our terms and confirm the information is accurate"})]})]})]})]})})},Ce=()=>{I();const d=X(),r=H(),n=new URLSearchParams(d.search),o=n.get("tab")||"profile";return p.useEffect(()=>{n.get("tab")||r("?tab=profile",{replace:!0})},[]),e.jsxs(oe,{children:[e.jsx(ce,{}),o==="kyc"&&e.jsx(fe,{}),o==="profile"&&e.jsx(xe,{})]})};export{Ce as default};
