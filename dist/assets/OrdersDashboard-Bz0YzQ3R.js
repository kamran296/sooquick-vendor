import{j as e,a as r,c as Oe,s as ke,b as w,y as d}from"./index-zXyjmdg6.js";import{b as me,c as C,d as K,e as H,f as Ae,g as _e}from"./index-UbaPnbOi.js";import{b as f,c as W,d as oe,e as Ee,f as Te}from"./index-U6dTGyeM.js";import{U as Pe}from"./UserLayout-BGydKQLs.js";import{f as de,a as M,b as De}from"./helpers-DDDbmMMy.js";import"./iconBase-C3Tc1-PF.js";import"./index-C9kmxXqw.js";import"./index-CJ1hBGK6.js";const F=({className:t,...l})=>e.jsx("div",{className:`bg-card text-card-foreground rounded-lg border border-gray-100 shadow-sm ${t||""}`,...l}),L=({className:t,...l})=>e.jsx("div",{className:`flex flex-col space-y-1.5 p-6 ${t||""}`,...l}),q=({className:t,...l})=>e.jsx("h3",{className:`text-2xl leading-none font-semibold tracking-tight ${t||""}`,...l}),R=({className:t,...l})=>e.jsx("div",{className:`p-6 pt-0 ${t||""}`,...l}),$e=t=>{if(!t?.payments?.length)return{baseEarning:0,additionalEarning:0,additionalPayments:[]};let l=0,o=0;const g=[];return t.payments.forEach(c=>{c.status==="successful"&&(c.type==="initial"&&(l+=c.vendorEarning||0),c.type==="additional"&&(o+=c.vendorEarning||0,g.push(c)))}),{baseEarning:l,additionalEarning:o,additionalPayments:g}},Ie=({selectedOrder:t,setSelectedOrder:l,getStatusIcon:o,getStatusColor:g,openOtpModal:c,completingOrder:S})=>{const{baseEarning:O,additionalEarning:p,additionalPayments:k}=$e(t),Y=t.vendorEarning;return e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-gray-300/30 p-2 sm:p-4",onClick:()=>l(null),children:e.jsxs("div",{className:"mx-2 my-4 w-full max-w-full rounded-lg bg-white p-4 sm:max-w-2xl sm:p-6 md:max-w-3xl",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between sm:mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 sm:text-xl",children:"Order Details"}),e.jsx("button",{onClick:()=>l(null),className:"p-1 text-gray-400 transition-colors hover:text-gray-600","aria-label":"Close",children:e.jsx(me,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 sm:text-lg",children:"Order Information"}),e.jsxs("dl",{className:"space-y-2 sm:space-y-3",children:[e.jsx(x,{label:"Order ID",value:`#${t.customOrderId?t.customOrderId:t._id?.slice(-8)} `}),e.jsx(x,{label:"Service",value:t.serviceDetails?.serviceName||"N/A"}),e.jsx(x,{label:"Category",value:t.serviceDetails?.category||"N/A"}),e.jsx(x,{label:"Booking Date",value:de(t.bookingDate||t.createdAt)}),e.jsx(x,{label:"Scheduled Date",value:de(t.scheduledDate)})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 sm:text-lg",children:"Earnings Summary"}),e.jsxs("dl",{className:"space-y-2 sm:space-y-3",children:[e.jsx(x,{label:"Service Earning",value:M(O),isEarning:!0}),k.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Additional Service Earning",value:M(p),isEarning:!0}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 text-sm",children:[e.jsx("p",{className:"mb-2 font-medium text-gray-700",children:"Additional Payments"}),e.jsx("ul",{className:"space-y-1",children:k.map((h,V)=>e.jsxs("li",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:["Extra Service #",V+1]}),e.jsx("span",{className:"font-medium text-green-600",children:M(h.vendorEarning)})]},h._id||V))})]})]}),e.jsx("div",{className:"mt-2 border-t pt-2",children:e.jsx(x,{label:"Total Earning",value:M(Y),isEarning:!0})}),e.jsxs("div",{children:[e.jsx("dt",{className:"mb-1 text-xs text-gray-600 sm:text-sm",children:"Status"}),e.jsx("dd",{children:e.jsxs("span",{className:`inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium ${g(t.status)}`,children:[o(t.status),e.jsx("span",{className:"ml-1 capitalize",children:t.status.replace("_"," ")})]})})]})]})]})]}),t.serviceAddress&&e.jsxs("div",{className:"mt-4 sm:mt-6",children:[e.jsx("h4",{className:"mb-2 text-base font-medium text-gray-900 sm:mb-3 sm:text-lg",children:"Service Address"}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3 sm:p-4",children:e.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[e.jsxs("div",{className:"font-medium",children:[t.serviceAddress?.building||"",",",t.serviceAddress.street]}),e.jsxs("div",{children:[t.serviceAddress.city,","," ",t.serviceAddress.state," ",t.serviceAddress.postalCode]}),e.jsx("div",{className:"text-gray-500",children:t.serviceAddress.country})]})})]}),t.cancellationMessage&&e.jsxs("div",{className:"mt-4 rounded-lg border border-red-200 bg-red-50 p-3 sm:mt-6 sm:p-4",children:[e.jsx("h4",{className:"mb-2 text-base font-medium text-red-900 sm:text-lg",children:"Cancellation Reason"}),e.jsx("p",{className:"text-sm text-red-700",children:t.cancellationMessage})]}),e.jsxs("div",{className:"mt-4 flex flex-col justify-end space-y-2 sm:mt-6 sm:flex-row sm:space-y-0 sm:space-x-3",children:[(t.status==="confirmed"||t.status==="in_progress"||t.status==="otp_requested")&&e.jsx("button",{onClick:()=>c(t),disabled:S,className:"w-full rounded-lg bg-green-600 px-4 py-2.5 text-sm font-medium text-white transition-colors hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:outline-none sm:w-auto",children:S?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Processing..."]}):t.status==="otp_requested"?"Enter OTP":"Mark Complete"}),e.jsx("button",{onClick:()=>l(null),className:"w-full rounded-lg bg-gray-100 px-4 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:outline-none sm:w-auto",children:"Close"})]})]})})},x=({label:t,value:l,isEarning:o=!1})=>e.jsxs("div",{children:[e.jsx("dt",{className:"mb-1 text-xs text-gray-600 sm:text-sm",children:t}),e.jsx("dd",{className:`text-sm font-medium ${o?"text-green-600":"text-gray-900"}`,children:l})]}),We=()=>{const[t,l]=r.useState({allOrders:[],upcomingOrders:[],ongoingOrders:[],cancelledOrders:[],completedOrders:[]}),[o,g]=r.useState("all"),[c,S]=r.useState(""),[O,p]=r.useState(null),[k,Y]=r.useState(!1),[h,V]=r.useState(!1),[G,A]=r.useState(!1),[Me,Fe]=r.useState(""),[xe,J]=r.useState(!1),[Le,qe]=r.useState(!1),[_,E]=r.useState(!1),[b,ue]=r.useState({total:0,upcoming:0,ongoing:0,cancelled:0,completed:0}),[ge,T]=r.useState(!1),[y,Q]=r.useState(null),[z,Z]=r.useState(!1),[m,j]=r.useState({serviceName:"",description:"",price:""}),[N,B]=r.useState(["","","",""]),[P,U]=r.useState(0),[X,ee]=r.useState(!1),[D,$]=r.useState(null),v=r.useRef(null),pe=Oe();r.useEffect(()=>{pe(ke(2))},[]);const se=async()=>{try{J(!0);const a=(await w.getAllOrders()).data;l(a),ue({total:a.allOrders?.length||0,upcoming:a.upcomingOrders?.length||0,ongoing:a.ongoingOrders?.length||0,cancelled:a.cancelledOrders?.length||0,completed:a.completedOrders?.length||0})}catch(s){console.log("Error fetching all the orders",s)}finally{J(!1)}},he=async s=>{try{if(E(!0),(await w.initiateOrderCompletion(s)).status===200)return $(s),te(),l(i=>({...i,allOrders:i.allOrders.map(n=>n._id===s?{...n,status:"otp_requested"}:n),ongoingOrders:i.ongoingOrders.map(n=>n._id===s?{...n,status:"otp_requested"}:n)})),d.success("OTP sent to customer successfully!"),!0}catch(a){return console.error("Error initiating order completion:",a),d.error("Failed to send OTP to customer"),!1}finally{E(!1)}},fe=async(s,a)=>{try{if(ee(!0),(await w.verifyOrderOtp(s,{otp:a})).status===200)return A(!1),B(["","","",""]),$(null),I(),l(n=>({...n,allOrders:n.allOrders.map(u=>u._id===s?{...u,status:"completed"}:u),ongoingOrders:n.ongoingOrders.filter(u=>u._id!==s),completedOrders:[...n.completedOrders,n.allOrders.find(u=>u._id===s)]})),d.success("Order completed successfully!"),!0}catch(i){return console.error("Error verifying OTP:",i),d.error(i.response.error.message||"Invalid OTP or verification failed"),!1}finally{ee(!1)}},te=()=>{I(),U(60),v.current=setInterval(()=>{U(s=>s<=1?(clearInterval(v.current),0):s-1)},1e3)},I=()=>{v.current&&(clearInterval(v.current),v.current=null)},be=(s,a)=>{if(s&&!/^\d+$/.test(s))return;const i=[...N];if(i[a]=s,B(i),s&&a<3){const n=document.getElementById(`otp-${a+1}`);n&&n.focus()}if(!s&&a>0){const n=document.getElementById(`otp-${a-1}`);n&&n.focus()}},ye=(s,a)=>{if(s.key==="Backspace"&&!N[a]&&a>0){const i=document.getElementById(`otp-${a-1}`);i&&i.focus()}},je=async()=>{if(D)try{await w.resendOtp(D)&&d.success("OTP resent successfully!")}catch(s){console.error("Error resending OTP:",s),d.error("Failed to resend OTP")}},Ne=async()=>{const s=N.join("");s.length===4&&D?await fe(D,s):d.error("Please enter a valid 4-digit OTP")},ae=async s=>{if(!_){if(p(s),$(s._id),s.status==="otp_requested"){A(!0),P===0&&te();return}try{E(!0),await he(s._id)&&A(!0)}finally{E(!1)}}},ve=()=>{A(!1),B(["","","",""]),$(null),p(null),I(),U(0)},re=s=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",in_progress:"bg-purple-100 text-purple-800",otp_requested:"bg-indigo-100 text-indigo-800",completed:"bg-emerald-100 text-emerald-800",cancelled:"bg-red-100 text-red-800",rejected:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",le=s=>({pending:e.jsx(K,{className:"h-4 w-4"}),paid:e.jsx(f,{className:"h-4 w-4"}),confirmed:e.jsx(f,{className:"h-4 w-4"}),in_progress:e.jsx(H,{className:"h-4 w-4"}),otp_requested:e.jsx(C,{className:"h-4 w-4"}),completed:e.jsx(f,{className:"h-4 w-4"}),cancelled:e.jsx(W,{className:"h-4 w-4"}),rejected:e.jsx(W,{className:"h-4 w-4"}),refunded:e.jsx(Te,{className:"h-4 w-4"})})[s]||e.jsx(C,{className:"h-4 w-4"}),ne=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s),ie=()=>{let s=t[`${o}Orders`]||[];return c&&(s=s.filter(a=>a._id?.toLowerCase().includes(c.toLowerCase())||a.service?.name?.toLowerCase().includes(c.toLowerCase()))),s};r.useEffect(()=>{se()},[]),r.useEffect(()=>()=>{I()},[]);const we=[{key:"all",label:"All Orders",count:b.total,icon:C},{key:"upcoming",label:"Upcoming",count:b.upcoming,icon:K},{key:"ongoing",label:"Ongoing",count:b.ongoing,icon:H},{key:"completed",label:"Completed",count:b.completed,icon:f},{key:"cancelled",label:"Cancelled",count:b.cancelled,icon:W}],ce=N.every(s=>s!==""),Ce=async()=>{if(y)try{Z(!0),(await w.addAdditionalService(y._id,m)).status===200&&(d.success("Additional service added successfully!"),await se(),T(!1),Q(null),j({serviceName:"",description:"",price:""}))}catch(s){console.error("Error adding additional service:",s),d.error(s.response?.data?.message||"Failed to add additional service")}finally{Z(!1)}},Se=s=>{if(!["confirmed","in_progress","additional_payment_pending"].includes(s.status)){d.error(`Cannot add services. Current order status: ${s.status.replace("_"," ")}`);return}Q(s),j({serviceName:"",description:"",price:""}),T(!0)};return e.jsx(Pe,{children:e.jsxs("div",{className:"bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-8 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Order Management"}),e.jsx("p",{className:"text-gray-600",children:"Track and manage all your orders"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-gray-400"}),e.jsx("input",{placeholder:"Search orders...",value:c,onChange:s=>S(s.target.value),className:"mb-4 w-full rounded-lg border border-gray-300 py-2 pr-4 pl-10 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 md:mb-0"})]})})]}),e.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(F,{className:"border-blue-200 bg-blue-50",children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Total Orders"}),e.jsx(C,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(R,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t?.allOrders?.length||0})})]}),e.jsxs(F,{className:"border-yellow-200 bg-yellow-50",children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Upcoming"}),e.jsx(K,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(R,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t?.upcomingOrders?.length||0})})]}),e.jsxs(F,{className:"border-purple-200 bg-purple-50",children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Ongoing"}),e.jsx(H,{className:"h-4 w-4 text-purple-600"})]}),e.jsx(R,{children:e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t?.ongoingOrders?.length||0})})]}),e.jsxs(F,{className:"border-green-200 bg-green-50",children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Completed"}),e.jsx(f,{className:"h-4 w-4 text-green-600"})]}),e.jsx(R,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t?.completedOrders?.length||0})})]})]}),e.jsxs("div",{className:"rounded-lg shadow-sm",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsx("nav",{className:"-mb-px flex",children:we.map(s=>e.jsxs("button",{onClick:()=>g(s.key),className:`flex items-center border-b-2 px-6 py-4 text-sm font-medium ${o===s.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:[e.jsx(s.icon,{className:"mr-2 h-4 w-4"}),s.label,s.count>0&&e.jsx("span",{className:"ml-2 rounded-full bg-gray-100 px-2 py-1 text-xs text-gray-900",children:s.count})]},s.key))})}),e.jsx("div",{className:"overflow-x-auto",children:xe?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-blue-500"})}):ie().length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(C,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No orders found"}),e.jsx("p",{className:"mt-2 text-gray-500",children:c?"Try adjusting your search terms":`You don't have any ${o} orders yet`})]}):e.jsxs("table",{className:"mt-3 w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:ie().map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",s._id?.slice(-8)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.serviceDetails?.serviceName||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:De(s.bookingDate||s.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[ne(s.serviceDetails?.price||0),s.additionalCosts?.total>0&&e.jsxs("div",{className:"text-xs text-purple-600",children:["+ ",ne(s.additionalCosts.total)," ","additional"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${re(s.status)}`,children:[le(s.status),e.jsx("span",{className:"ml-1 capitalize",children:s.status.replace("_"," ")})]}),s.additionalServices&&s.additionalServices.length>0&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-purple-50 px-2 py-1 text-xs text-purple-600",children:[e.jsx(oe,{className:"mr-1 h-3 w-3"}),s.additionalServices.filter(a=>a.status==="pending").length," ","pending",s.additionalServices.filter(a=>a.status==="accepted").length>0&&` • ${s.additionalServices.filter(a=>a.status==="accepted").length} accepted`]}),s.status==="additional_payment_pending"&&s.additionalCosts&&e.jsxs("span",{className:"rounded-full bg-orange-50 px-2 py-1 text-xs text-orange-600",children:["Payment: $",s.additionalCosts.total]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>p(s),className:"flex items-center text-gray-500 hover:text-gray-900",children:[e.jsx(_e,{className:"mr-1 h-4 w-4"}),"View"]}),(s.status==="confirmed"||s.status==="in_progress"||s.status==="additional_payment_pending")&&e.jsxs("button",{disabled:s.status==="completed",onClick:()=>Se(s),className:"flex items-center text-purple-600 hover:text-purple-900",title:"Add Additional Service",children:[e.jsx(oe,{className:"mr-1 h-4 w-4"}),"Add Service"]}),(s.status==="confirmed"||s.status==="in_progress"||s.status==="otp_requested")&&e.jsxs("button",{onClick:()=>ae(s),disabled:_,className:`flex items-center ${_?"cursor-not-allowed text-gray-400":"text-green-600 hover:text-green-900"}`,children:[e.jsx(f,{className:"mr-1 h-4 w-4"}),s.status==="otp_requested"?"Enter OTP":"Complete"]})]})})]},s._id))})]})})]}),O&&!k&&!h&&!G&&e.jsx(Ie,{selectedOrder:O,setSelectedOrder:p,getStatusIcon:le,getStatusColor:re,openOtpModal:ae,completingOrder:_}),G&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-gray-300/30 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-lg",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Complete Order"}),e.jsx("button",{onClick:ve,className:"text-gray-400 transition-colors hover:text-gray-600",children:e.jsx(me,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Verification Code"}),e.jsx("p",{className:"mt-1 mb-6 text-sm text-gray-500",children:"OTP has been sent to the customer's email for verification. Please ask the customer to provide the OTP to complete this order."}),e.jsx("div",{className:"mx-auto mb-4 flex w-fit justify-between gap-3",children:N.map((s,a)=>e.jsx("input",{id:`otp-${a}`,type:"text",maxLength:1,value:s,onChange:i=>be(i.target.value,a),onKeyDown:i=>ye(i,a),className:"h-12 w-12 rounded-lg border border-gray-300 text-center text-xl font-semibold focus:border-green-500 focus:ring-2 focus:ring-green-200 focus:outline-none"},a))}),e.jsx("p",{className:"mb-4 text-center text-sm text-gray-500",children:P>0?e.jsxs(e.Fragment,{children:["Resend in ",Math.floor(P/60),":",(P%60).toString().padStart(2,"0")]}):e.jsx("button",{onClick:je,className:"text-blue-600 hover:text-blue-800 hover:underline",children:"Resend OTP"})}),e.jsx("button",{onClick:Ne,disabled:!ce||X,className:`w-full rounded-lg py-3 font-semibold text-white transition ${ce&&!X?"bg-green-600 hover:bg-green-700":"cursor-not-allowed bg-gray-400"}`,children:X?"Verifying...":"Verify & Complete Order"})]})]})}),ge&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 h-full w-full overflow-y-auto bg-black/30",children:e.jsx("div",{className:"relative top-20 mx-auto w-full max-w-md rounded-md border bg-white p-5 shadow-lg",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between border-b pb-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add Additional Service"}),e.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ee,{className:"h-5 w-5"})})]}),y&&e.jsxs("div",{className:"mt-4 rounded-md bg-blue-50 p-3",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Order ID:"})," #",y._id?.slice(-8)]}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Service:"})," ",y.serviceDetails?.serviceName]})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Service Name *"}),e.jsx("input",{type:"text",value:m.serviceName,onChange:s=>j(a=>({...a,serviceName:s.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"e.g., Extra Cleaning, Additional Parts, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Description *"}),e.jsx("textarea",{value:m.description,onChange:s=>j(a=>({...a,description:s.target.value})),rows:"3",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Describe the additional service in detail..."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Price (₹) *"}),e.jsx("input",{type:"number",min:"0",step:"10",value:m.price,onChange:s=>j(a=>({...a,price:s.target.value})),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"0.00"})]})}),m.price&&e.jsxs("div",{className:"rounded-md bg-gray-50 p-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Total: ₹",m.price]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This amount will be added to the customer's bill"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3 border-t pt-3",children:[e.jsx("button",{onClick:()=>T(!1),disabled:z,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:"Cancel"}),e.jsx("button",{onClick:Ce,disabled:z||!m.serviceName||!m.description||!m.price,className:"rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50",children:z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 inline-block h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),"Adding..."]}):"Add Service"})]})]})})})]})})};export{We as default};
